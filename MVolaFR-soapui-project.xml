<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="99a5f8d2-d1ed-4c93-921b-f606d39bdc71" activeEnvironment="Default" name="MVola" resourceRoot="" soapui-version="5.6.0" abortOnError="false" runType="SEQUENTIAL" defaultScriptLanguage="Groovy" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:WsdlInterface" id="46060ec2-0601-437f-b9c2-307828cddcbc" wsaVersion="NONE" name="tsUSSDGWBinding" type="wsdl" bindingName="{urn:telmaServices}tsUSSDGWBinding" soapVersion="1_1" anonymous="optional" definition="http://tarur1q:8040/services/tsUSSDGW?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://tarur1q:8040/services/tsUSSDGW?wsdl"><con:part><con:url>http://tarur1q:8040/services/tsUSSDGW?wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="tsUSSDGW" targetNamespace="urn:telmaServices" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="urn:telmaServices" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/">
  <wsdl:types>
    <xsd:schema targetNamespace="urn:telmaServices">
      <xsd:element name="tsGetFirstMenuRequest">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element maxOccurs="1" minOccurs="1" name="msisdn" type="xsd:string"/>
            <xsd:element maxOccurs="1" minOccurs="1" name="message" type="xsd:string"/>
            <xsd:element maxOccurs="1" minOccurs="0" name="sessionid" type="xsd:string"></xsd:element>
            <xsd:element maxOccurs="1" minOccurs="0" name="channel" type="xsd:string"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="tsGetFirstMenuResponse">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element maxOccurs="1" minOccurs="1" name="statusCode" type="xsd:string" ype="xsd:string"/>
            <xsd:element maxOccurs="1" minOccurs="1" name="statusReason" type="xsd:string"/>
            <xsd:element maxOccurs="1" minOccurs="0" name="menu" type="xsd:string"/>
            <xsd:element maxOccurs="1" minOccurs="0" name="hostname" type="xsd:string"></xsd:element>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="tsGetSubMenuRequest">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element maxOccurs="1" minOccurs="1" name="msisdn" type="xsd:string"></xsd:element>
            <xsd:element maxOccurs="1" minOccurs="1" name="message" type="xsd:string"></xsd:element>
            <xsd:element maxOccurs="1" minOccurs="1" name="hostname" type="xsd:string"></xsd:element>
            <xsd:element maxOccurs="1" minOccurs="1" name="sessionid" type="xsd:string"></xsd:element>
            <xsd:element maxOccurs="1" minOccurs="0" name="channel" type="xsd:string"></xsd:element>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="tsGetSubMenuResponse">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element maxOccurs="1" minOccurs="1" name="statusCode" type="xsd:string"></xsd:element>
            <xsd:element maxOccurs="1" minOccurs="1" name="statusReason" type="xsd:string"></xsd:element>
            <xsd:element maxOccurs="1" minOccurs="0" name="menu" type="xsd:string"></xsd:element>
            <xsd:element maxOccurs="1" minOccurs="0" name="hostname" type="xsd:string"></xsd:element>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
    </xsd:schema>
  </wsdl:types>
  <wsdl:message name="tsGetFirstMenuRequest">
    <wsdl:part element="tns:tsGetFirstMenuRequest" name="tsGetFirstMenuRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="tsGetSubMenuResponse">
    <wsdl:part element="tns:tsGetSubMenuResponse" name="tsGetSubMenuResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="tsGetSubMenuRequest">
    <wsdl:part element="tns:tsGetSubMenuRequest" name="tsGetSubMenuRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="tsGetFirstMenuResponse">
    <wsdl:part element="tns:tsGetFirstMenuResponse" name="tsGetFirstMenuResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:portType name="tsUSSDGWPortType">
    <wsdl:operation name="tsGetFirstMenu">
      <wsdl:input message="tns:tsGetFirstMenuRequest"></wsdl:input>
      <wsdl:output message="tns:tsGetFirstMenuResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="tsGetSubMenu">
      <wsdl:input message="tns:tsGetSubMenuRequest"></wsdl:input>
      <wsdl:output message="tns:tsGetSubMenuResponse"></wsdl:output>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="tsUSSDGWBinding" type="tns:tsUSSDGWPortType">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="tsGetFirstMenu">
      <soap:operation soapAction="urn:telmaServices/tsGetFirstMenu"/>
      <wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="tsGetSubMenu">
      <soap:operation soapAction="urn:telmaServices/tsGetSubMenu"/>
      <wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="tsUSSDGW">
    <wsdl:port binding="tns:tsUSSDGWBinding" name="tsUSSDGWPort">
      <soap:address location="http://tarur1q:8040/services/tsUSSDGW"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>${#Project#End point}</con:endpoint><con:endpoint>http://tarur1q:8040/services/tsUSSDGW</con:endpoint></con:endpoints><con:operation id="2ab28626-e0a1-4a6f-a76e-21ba67e6f124" isOneWay="false" action="urn:telmaServices/tsGetFirstMenu" name="tsGetFirstMenu" bindingOperationName="tsGetFirstMenu" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="9bab1277-3011-41ab-96cd-90d2d5d6004c" name="Request 1" outgoingWss="" incomingWss=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>261343500078</msisdn>\r
         <message>*130*555%23</message>\r
         <!--Optional:-->\r
         <sessionid>445</sessionid>\r
         <!--Optional:-->\r
         <channel>USSD</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="386a361a-0906-4c66-bdf2-111e25533806" isOneWay="false" action="urn:telmaServices/tsGetSubMenu" name="tsGetSubMenu" bindingOperationName="tsGetSubMenu" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="aa28812d-87e0-4582-8f88-b330a0ae2df9" name="Request 1" outgoingWss="" incomingWss=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>261343500078</msisdn>\r
         <message>1</message>\r
         <hostname>tapt463lv</hostname>\r
         <sessionid>6</sessionid>\r
         <!--Optional:-->\r
         <channel>USSD</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:call></con:operation></con:interface><con:testSuite id="8fd6bcae-6320-44fb-9834-6ee631a17cbc" name="Main menu"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="cc96fa33-6b9e-4324-8411-8091425dc851" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Show landing page" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="2630ff3d-95d6-46b9-ad49-13647839899f" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="7ebd7b5a-a9fb-43bc-b696-7ccb0d7b1557"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0042f52e-1563-4193-90fe-7d7c0f89f4f8" name="SOAP Response"/><con:assertion type="Simple Contains" id="21d16e35-4e9f-4b8b-9365-1dbd73d62aa7" name="Check conformity  of main menu"><con:configuration><token>MVOLA
1 Acheter Credit ou Offre Telma
2 Transferer argent (vers toute destination)
3 MVola Avance ou Epargne
4 Retrait d'argent
# Page suivante</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c9b4cd8b-22d0-4cb5-98d7-6840c908e984" name="Check if hostname contain &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="e4558ec6-2d68-49d9-9ff4-1c68d530c27b" name="Pass hostname value to the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c18b3a5b-e769-47a1-b6a7-c046b10b0da5" name="Choose menu 1 Acheter credit ou offre telma"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu 1 Acheter credit ou offre telma" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="91193621-2e30-45a0-b75b-5e7396af842f"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a91cefab-fa1e-4f70-901b-a572c9c52302" name="SOAP Response"/><con:assertion type="Simple Contains" id="84f01342-8264-4ba8-b3e1-bd9c61b46ab2" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="01d46748-88e7-4760-90db-1c4ebe20aeeb" name="Check the conformity of submenu"><con:configuration><token>ACHETER CREDIT OU OFFRE TELMA
1 Credit pour mon numero
2 Credit pour autre numero
4 Offre pour mon numero
5 Offre pour autre numero</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>SessionId</con:name><con:value>1</con:value></con:property><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>ServiceEndPoint</con:name><con:value>http://tarur1q:8040/services/tsUSSDGW</con:value></con:property></con:properties></con:testSuite><con:testSuite id="070d0b38-5c10-4284-9533-5fdc95c10925" name="Buy recharge for my number"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="2e0f7204-7d7a-44c3-b4d6-f88520527421" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Load the menu for recharge" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="160c39bb-b547-4298-a8ee-83557679fbda" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="701c3b43-0b47-4239-bbf9-8377ea3e886e" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="673f7ca6-5668-45ed-8229-c05a7d9fa769" name="Choose &quot;1 Credit pour mon numero&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu"><con:configuration><token>Credit a envoyer
1 Recharger directement
2 Code recharge</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>2</con:value></con:property></con:properties></con:testCase><con:testCase id="37c233ee-5e76-49c6-9660-206f462aaa84" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Type wrong index menu execeeded 3 retries" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="6e0c1ef6-be61-4076-a683-b0029978b6e5" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7653e355-51c5-47fb-8530-1615b24186e5" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="4b3560a9-dbb0-4518-936b-c97c53dadba0" name="Choose &quot;1 Credit pour mon numero&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="656f4d1c-be27-4acb-8f43-7eb5df8a8955" name="Type a number which doesn t exist into the menu"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a number which doesn t exist into the menu" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>3</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu"><con:configuration><token>Credit a envoyer
1 Recharger directement
2 Code recharge</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="db40eef8-f6a7-4ae3-bc6a-43691edf854b" name="Type again a number which doesn t exist into the menu"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type again a number which doesn t exist into the menu" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>4</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu"><con:configuration><token>Credit a envoyer
1 Recharger directement
2 Code recharge</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="4a74ef4b-504b-4287-ac11-b7926082ceb7" name="Type at 3rd time number which doesn t exist into the menu"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type at 3rd time number which doesn t exist into the menu" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>5</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="082d5b64-8a98-4980-a43d-2ab69111d1ed" name="Check message as shown when we have typed wrong menu in 3 times" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type at 3rd time number which doesn t exist into the menu#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le nombre d'essai maximum est atteint. Veuillez r√©essayer plus tard")
else if (langue =="MG")
	assert (message=="Mihoatra ny fanandramana azo ekena. Mamerena afaka kelikely")
</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c6f03ac8-0d7f-47e3-a932-9bda40145d16" name="Check the conformity of submenu"><con:configuration><token>Credit a envoyer
1 Recharger directement
2 Code recharge</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>3</con:value></con:property></con:properties></con:testCase><con:testCase id="17f5f205-829e-4170-b68d-cae5b8728b06" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Test wrong amount less than 100 Ar" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="3537f982-3cdb-42f5-9e32-3b913b6acc60" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="634f6387-ca1d-494b-93b3-fbcf1c597d5d" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="5085b34e-37d1-4605-8346-f2f673fef8ee" name="Choose &quot;1 Credit pour mon numero&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="5ac5e0d2-978f-4870-adf1-5e794bd4b583" name="Choose 1 Recharger directement"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="08b5d7bd-0b3b-49a1-905c-70f4bc33e93d" name="Enter wrong amount less than 100 Ar"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Enter wrong amount less than 100 Ar" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>99</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of amount"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Enter wrong amount less than 100 Ar#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Veuillez verifier le montant SVP (100 a 500 000 Ar)")
else if (langue =="MG")
	assert (message=="Hamarino ny sandan ny vola azafady (100Ar hatramin ny 500 000Ar)")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>4</con:value></con:property></con:properties></con:testCase><con:testCase id="f3b163ee-594b-4574-a05e-8cfec8405058" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Test wrong amount  greater than 500 000 Ar" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="9a3b903c-c87b-40d4-bb59-e85c3935f924" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="1d2763af-d53f-4d39-a33d-0936664aa5a7" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="74a37677-7614-4ef0-b729-b845b7e1339b" name="Choose &quot;1 Credit pour mon numero&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="23173198-fbec-49d4-b8ed-090905b7372e" name="Choose 1 Recharger directement"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="26ba1d45-4d3a-4bda-9ac2-c9213482a939" name="Enter wrong amount greater than 500 000 Ar"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Enter wrong amount greater than 500 000 Ar" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>500001</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of amount"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Enter wrong amount greater than 500 000 Ar#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Veuillez verifier le montant SVP (100 a 500 000 Ar)")
else if (langue =="MG")
	assert (message=="Hamarino ny sandan ny vola azafady (100Ar hatramin ny 500 000Ar)")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7c0d183e-ccb9-44e3-9b2b-82dd4b6a3d1f" name="Type invalid amount format contained Escape or Character"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type invalid amount format contained Escape or Character" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>6abc 8</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of amount"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Enter wrong amount greater than 500 000 Ar#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Veuillez verifier le montant SVP (100 a 500 000 Ar)")
else if (langue =="MG")
	assert (message=="Hamarino ny sandan ny vola azafady (100Ar hatramin ny 500 000Ar)")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7074565b-be79-49c3-b95b-c4e726ccb092" name="Test wrong amount execeeded (3 retries)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Test wrong amount execeeded (3 retries)" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>600000</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Test wrong amount execeeded (3 retries)#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le nombre d'essai maximum est atteint.")
else if (langue =="MG")
	assert (message=="Mihoatra ny fanandramana azo ekena.")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>5</con:value></con:property></con:properties></con:testCase><con:testCase id="9eeb8fd7-ab18-45f1-9aa9-76529432b3a2" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Buy recharge for my number" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="200611c9-9b87-4b32-8961-c3d087da4b61" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="983cb362-8ff7-4dc8-8e35-097e71be3b61" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="4b58db6b-1960-4b35-894f-b151c11ba9b8" name="Choose &quot;1 Credit pour mon numero&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7594fd71-869c-4973-9a8c-d517a8069f6b" name="Choose 1 Recharger directement"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="65ee088d-e7dd-49d3-882e-481bcfe3676a" name="Enter valid amount 1000 Ar"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Enter valid amount 1000 Ar" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1000</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Enter valid amount 1000 Ar#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour accepter de recharger 1 000 Ar sur votre compte prepaye depuis votre compte MVola, Entrer code secret :")
else if (langue =="MG")
	assert (message=="Raha manaiky hamahana 1 000 Ar ny kaonty prepaye-nao, Ampidiro ny kaody miafina:")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="20e08fd5-610e-4a99-a83e-87d4411ca3ac" name="Type invalid pin format contained Escape or Character"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type invalid pin format contained Escape or Character" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>8 abc</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of pin"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type invalid pin format contained Escape or Character#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le code secret doit comporter 4 chiffres.")
else if (langue =="MG")
	assert (message=="Hamarino ny kaody miafina (tarehimarika 4).")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="62e94b27-928a-42fc-a8b4-66e1bdb3c90d" name="Type a valid Pin MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid Pin MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#PIN_MSISDN_1}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of amount"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type a valid Pin MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message.contains("Votre demande d'achat a r√©ussi. Ref: "))
	assert (message.contains(". Bravo, Bonus de 20 pourcent sur ce dernier rechargement, consultable via #357#."))
}
else if (langue =="MG")
{
	assert (message.contains("Tontosa ny fangatahanao. Ref: "))
	assert (message.contains(". Nahazo tombony 20 isan-jato ny fahana Telma nampidirinao, hita @ #357#."))
}</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8b642415-6704-4e90-864e-71d9be761e08" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid Pin MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	referenceInStr=message[37..45]
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_buy_recharge_ok",referenceInStr)
}	
else if (langue =="MG")
{
	referenceInStr=message[30..38]
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_buy_recharge_ok",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>6</con:value></con:property></con:properties></con:testCase><con:testCase id="d708af91-f1a9-4c0c-a428-ac01faf1392d" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Type invalid pin format exceeded 3 retries" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="dc8547a8-eaed-45cd-8648-af43102ebea8" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="11427c32-c8b4-451b-9838-67972422105a" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="d3fbe814-980d-42cb-ae95-6d48d5b62c70" name="Choose &quot;1 Credit pour mon numero&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="ae2e6c42-073b-4e7f-81fb-b24c9c1c6e18" name="Choose 1 Recharger directement"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="747ec031-726c-47ae-8155-df4296647b28" name="Enter valid amount 1000 Ar"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Enter valid amount 1000 Ar" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1000</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="cc2f0acf-4e4e-49e6-b616-7d940d211c67" name="Type invalid pin format contained Escape or Character"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type invalid pin format contained Escape or Character" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>8 abc</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of pin"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type invalid pin format contained Escape or Character#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le code secret doit comporter 4 chiffres.")
else if (langue =="MG")
	assert (message=="Hamarino ny kaody miafina (tarehimarika 4).")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7c53a393-1c25-498a-9604-867ec774c37b" name="Type again pin format invalid"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type again pin format invalid" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>445446465</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of pin"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type again pin format invalid#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le code secret doit comporter 4 chiffres.")
else if (langue =="MG")
	assert (message=="Hamarino ny kaody miafina (tarehimarika 4).")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="e8215c66-3dd8-438b-8b8f-7729ddd2df7a" name="Type  pin format invalid exceeded 3 retries"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type  pin format invalid exceeded 3 retries" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>8 @bc</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of pin"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type  pin format invalid exceeded 3 retries#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le nombre d'essai maximum est atteint")
else if (langue =="MG")
	assert (message=="Mihoatra ny fanandramana azo ekena.")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>7</con:value></con:property></con:properties></con:testCase><con:testCase id="6030b356-79fd-466f-94e6-0d347e59558b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Perform Buy recharge failed ( Insufficient Solde Mvola)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="ac173a6e-2f6f-49ca-ad96-f594ba5bb225" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="3ffd27c3-26ef-45bf-bc8a-b8afeace5b9d" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="8fdfd607-0a34-4cdd-9b7f-d2922bcc5ca6" name="Choose &quot;1 Credit pour mon numero&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="19164cc8-6370-479a-8f06-4fe58b63b40d" name="Choose 1 Recharger directement"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="4d391aa4-98a8-4af9-b8d2-7e46dc772da4" name="Enter amount which exede available balance"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Enter amount which exede available balance" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>100000</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Enter amount which exede available balance#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour accepter de recharger 100 000 Ar sur votre compte prepaye depuis votre compte MVola, Entrer code secret :")
else if (langue =="MG")
	assert (message=="Raha manaiky hamahana 100 000 Ar ny kaonty prepaye-nao, Ampidiro ny kaody miafina :")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="5603f9a9-25ff-4503-819e-6e499dde7dea" name="Type a valid pin"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#PIN_MSISDN_1}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of the message when user have no much balance"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
log.info ("Votre sole est de: "+solde)
if(langue =="FR")
{
	assert (message.contains("Votre solde MVola est insuffisant. Votre solde est de "))
	assert (message.contains("Ar. Faites un depot MVola suffisant pour pouvoir effectuer cette transaction. Ref: "))
}
else if (langue =="MG")
{
	assert (message.contains("Tsy tontosa ny fangatahanao noho ny volanao tsy ampy. Volanao sisa "))
	assert (message.contains("Ar. Mampidira vola ao anaty kaonty hanatontosana ny fifanakalozana. Ref: "))
}</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="0594238d-385e-4568-b2fe-62061c1cf342" name="Check the existence of a reference in the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	referenceInStr=message.drop(message.lastIndexOf("Ref: ")+5)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_insuf_sold",referenceInStr)
}	
else if (langue =="MG")
{
	referenceInStr=message.drop(message.lastIndexOf("Ref: ")+5)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_insuf_sold",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="cd19d2c8-3d73-49c7-a7be-2450f7865cf8" name="Check the conformity of balance"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
//solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	assert message.contains("Ar.")
	solde=message[(message.lastIndexOf("est de ")+7)..(message.lastIndexOf("Ar")-1)]
	log.info solde
	assert solde ==~/^(\d{1,3})|[0-9]{1,3}()\s?([0-9]{3}\s?)+$/
}	
else if (langue =="MG")
{
	assert message.contains("Ar.")
	solde =message[(message.lastIndexOf("sisa ")+5)..(message.lastIndexOf("Ar")-1)]
	assert solde ==~/^(\d{1,3})|[0-9]{1,3}()\s?([0-9]{3}\s?)+$/
	log.info solde
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>9</con:value></con:property></con:properties></con:testCase><con:testCase id="5ac9643e-119c-42ce-90dc-bcc8830e2e72" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Perform buy recharge for my number recharge directly" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="e570c1e3-5c8b-4e2c-9b36-e6fad9702fbf" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="42cc41e2-583b-46d1-a5fc-a4f0cf6cc073" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f05f7c66-810f-4ade-8dd0-8a88437c8759" name="Choose &quot;1 Credit pour mon numero&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="95491b2a-8d75-4b17-97ef-697281b00cf1" name="Choose 1 Recharger directement"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="105b76f8-1769-4a85-948a-7c52a4327d00" name="Enter valid amount"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Enter valid amount" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>100</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of confirm message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Enter valid amount#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour accepter de recharger 100 Ar sur votre compte prepaye depuis votre compte MVola, Entrer code secret :")
else if (langue =="MG")
	assert (message=="Raha manaiky hamahana 100 Ar ny kaonty prepaye-nao, Ampidiro ny kaody miafina :")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="df55bfcf-39eb-436c-844a-7167360d16f5" name="Type a valid pin"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#PIN_MSISDN_1}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of the message when user is succesfully performed action"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
log.info ("Votre sole est de: "+solde)
if(langue =="FR")
{
	assert (message.contains("Votre demande d'achat a r√©ussi. Ref: "))
	assert (message.contains(". Bravo, Bonus de 20 pourcent sur ce dernier rechargement, consultable via #357#."))
}
else if (langue =="MG")
{
	assert (message.contains("Tontosa ny fangatahanao. Ref: "))
	assert (message.contains(". Nahazo tombony 20 isan-jato ny fahana Telma nampidirinao, hita @ #357#."))
}</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="0594238d-385e-4568-b2fe-62061c1cf342" name="Check the existence of a reference in the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	referenceInStr=message[37..45]
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_perf_recharge_ok",referenceInStr)
}	
else if (langue =="MG")
{
	referenceInStr=message[30..38]
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_perf_recharge_ok",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>10</con:value></con:property></con:properties></con:testCase><con:testCase id="868a8848-cd41-4574-b8b6-a1434fe242ea" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Perform buy recharge with an agent who haven't account MVola" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="d3a6db28-ef55-4fd5-8244-375dd42db102" name="Show main menu MVola" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_have_not_MVola}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="70e7afcf-e683-4988-96f2-adc6442b7e44" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_have_not_MVola}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="ee4c4389-17af-4ae1-a6ec-af1cc652bbcc" name="Choose &quot;1 Credit pour mon numero&quot;" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_have_not_MVola}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="37c5bede-7d16-45ff-a322-19e4b3553682" name="Choose 1 Recharger directement" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_have_not_MVola}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="65329638-3089-4340-936b-7cffde14a4bf" name="Enter valid amount" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Enter valid amount" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_have_not_MVola}</msisdn>\r
         <message>100</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of confirm message" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Enter valid amount#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour accepter de recharger 100 Ar sur votre compte prepaye depuis votre compte MVola\n"+
"Entrer code secret:")
else if (langue =="MG")
	assert (message=="Raha manaiky hamahana 100 Ar ny kaonty prepaye-nao\n"+
"Ampidiro ny kaody miafina:")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="d09f23ee-7e93-4396-a933-634eb4acf347" name="Type a valid pin" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_have_not_MVola}</msisdn>\r
         <message>${#Project#PIN_MSISDN_not_MVola}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour pouvoir utiliser les services MVola, ouvrez gratuitement votre compte. Contactez votre Telma Shop ou Marchand MVola le plus proche !")
else if (langue =="MG")
	assert (message=="Raha te hampiasa tolotra M-Vola ianao dia manokafa kaonty maimaimpoana eny amin'ny Telma Shop na mpanjara akaikinao.")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="8d045ceb-e09b-47f8-9af8-2634bd172b21" name="Try to buy recharge"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to buy recharge" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_have_not_MVola}</msisdn>\r
         <message>${#Project#*111*1}*1*1*1*1000*${#Project#PIN_MSISDN_not_MVola}${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="99f59b50-7c3a-4acb-8506-61078c16addc" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy recharge#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour pouvoir utiliser les services MVola, ouvrez gratuitement votre compte. Contactez votre Telma Shop ou Marchand MVola le plus proche !")
else if (langue =="MG")
	assert (message=="Raha te hampiasa tolotra M-Vola ianao dia manokafa kaonty maimaimpoana eny amin'ny Telma Shop na mpanjara akaikinao.")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>11</con:value></con:property></con:properties></con:testCase><con:testCase id="a7b10350-ac87-41a0-bc2e-7b1db3a2fc6b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Perform buy recharge with an agent whose password has expired" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="5759ca71-5a23-465a-a559-8742942b1c6d" name="Show main menu MVola" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="68eee9e2-82d0-4acf-bdde-018e478eb73c" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="10a05a1c-17de-4254-80dd-8b6a02049e50" name="Choose &quot;1 Credit pour mon numero&quot;" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="eb7f602d-673f-48e3-9f04-8f2b8bf3a54d" name="Choose 1 Recharger directement" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="6fa1da9c-1a44-4bd5-b430-260743f2cda7" name="Enter valid amount" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Enter valid amount" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>100</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of confirm message" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Enter valid amount#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour accepter de recharger 100 Ar sur votre compte prepaye depuis votre compte MVola\n"+
"Entrer code secret:")
else if (langue =="MG")
	assert (message=="Raha manaiky hamahana 100 Ar ny kaonty prepaye-nao\n"+
"Ampidiro ny kaody miafina:")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="dd7e0317-eebf-48f3-83c7-6b227409b2b0" name="Type a valid pin" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>${#Project#PIN_MSISDN_pass_expired}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Votre demande n a pas abouti. Vous avez recu un SMS avec les details de votre transaction. Si besoin, contactez le Service Clientele au 807.")
else if (langue =="MG")
	assert (message=="Tsy tafita ny fangatahanao. Naharay SMS manazava ny antony ianao. Raha ilaina, antsoy ny Service Clientele amin ny 807.")</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bda1759c-a477-4bcd-8c0a-54e7c959196e" name="Verify if an sms has sent"><con:configuration><token>This test should stay false while the sms has not been sent</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f0a3fbb3-4499-4612-8d87-c70d239f00e2" name="Try to buy recharge"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to buy recharge" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>${#Project#*111*1}*1*1*1*1000*${#Project#PIN_MSISDN_pass_expired}${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="3f03beff-0573-4d49-8b0d-b037b3e41f8f" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy recharge#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Votre demande n a pas abouti. Vous avez recu un SMS avec les details de votre transaction. Si besoin, contactez le Service Clientele au 807.")
else if (langue =="MG")
	assert (message=="Tsy tafita ny fangatahanao. Naharay SMS manazava ny antony ianao. Raha ilaina, antsoy ny Service Clientele amin ny 807.")</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7f0d45b4-da0e-425f-b253-fb9d52e8964e" name="Verify if an sms has been sent"><con:configuration><token>This test should stay in fail until a sms is send</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>12</con:value></con:property></con:properties></con:testCase><con:testCase id="22adfe7d-4404-47a6-94ee-c67551315fe2" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Perform buy recharge with an agent who have not privileges" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="24ec16b1-1e43-4b7c-b4b4-7f21d5b7eb56" name="Show main menu MVola" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="79377521-3ad6-4f94-b539-74c6ca77dcc4" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="67eedc03-1887-43f6-ad73-cf99e517e618" name="Choose &quot;1 Credit pour mon numero&quot;" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="56651a30-f3cc-47b7-9251-06526c0378a9" name="Choose 1 Recharger directement" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="eb0082a3-1c34-4541-8642-e91bdaa61939" name="Enter valid amount" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Enter valid amount" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>100</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of confirm message" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Enter valid amount#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour accepter de recharger 100 Ar sur votre compte prepaye depuis votre compte MVola\n"+
"Entrer code secret:")
else if (langue =="MG")
	assert (message=="Raha manaiky hamahana 100 Ar ny kaonty prepaye-nao\n"+
"Ampidiro ny kaody miafina:")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="9923fc41-f53c-4b36-b169-556b87d4f8ce" name="Type a valid pin" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>${#Project#PIN_MSISDN_access_denied}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="5b7031f1-dc48-4bbe-b2dd-da04f829f026" name="Check the conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message.contains("Votre demande n'a pas abouti. Vous n'avez pas acces a cette fonction. Si besoin, contactez le Service Clientele au 807. "))
else if (langue =="MG")
	assert (message.contains("Tsy tontosa ny fangatahanao. Tsy afaka manatontosa ity fifanakalozana ity ianao. Raha mila fanazavana fanampiny, antsoy ny 807. "))</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	referenceInStr=message.drop(125)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_access_denied",referenceInStr)
}	
else if (langue =="MG")
{
	referenceInStr=message.drop(134)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_access_denied",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="737d4de7-9f15-48fe-878f-b578a8f0f398" name="Try to buy recharge"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to buy recharge" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>${#Project#*111*1}*1*1*1*1000*${#Project#PIN_MSISDN_access_denied}${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="08a3f432-3583-4bf2-b1b8-4e790a0b5619" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy recharge#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message.contains("Votre demande n'a pas abouti. Vous n'avez pas acces a cette fonction. Si besoin, contactez le Service Clientele au 807. "))
else if (langue =="MG")
	assert (message.contains("Tsy tontosa ny fangatahanao. Tsy afaka manatontosa ity fifanakalozana ity ianao. Raha mila fanazavana fanampiny, antsoy ny 807. "))</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="574e1ba6-84f3-46cf-af84-1f0c3ef6073a" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy recharge#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	referenceInStr=message.drop(125)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_access_denied",referenceInStr)
}	
else if (langue =="MG")
{
	referenceInStr=message.drop(134)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_access_denied",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>13</con:value></con:property></con:properties></con:testCase><con:testCase id="80fc6f52-6c3e-42a4-9b6d-2ccaea24129e" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Perform buy recharge code with an agent whose password has expired" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="4145593d-a054-4464-a85d-dce9d98a7679" name="Show main menu MVola" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f02d8e84-a3d2-4a99-902f-0422fdee2fb9" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="0fb7c0d9-829d-4a25-bf05-4c674b7b929c" name="Choose &quot;1 Credit pour mon numero&quot;" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="46c2f741-7943-4769-a5cd-15add22083bc" name="Choose 2 Code recharge" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Code recharge" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="cc737614-8e3f-481e-b7fc-cd870ee2776e" name="Choose 1 Acheter recharge code" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Acheter recharge code" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="82d4dbfe-7b29-4d55-b585-e8dbe8285562" name="Choose 1 Code Recharge 1000" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Code Recharge 1000" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="19a90c76-0849-4088-ad9f-d09efb9ccaf2" name="Type valid number for recharge code 1000" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type valid number for recharge code 1000" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of confirm message" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Enter valid amount#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour accepter de recharger 100 Ar sur votre compte prepaye depuis votre compte MVola\n"+
"Entrer code secret:")
else if (langue =="MG")
	assert (message=="Raha manaiky hamahana 100 Ar ny kaonty prepaye-nao\n"+
"Ampidiro ny kaody miafina:")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f5655033-6ef4-47b9-aff8-8aad53dff13b" name="Type a valid pin" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>${#Project#PIN_MSISDN_pass_expired}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Votre demande n a pas abouti. Vous avez recu un SMS avec les details de votre transaction. Si besoin, contactez le Service Clientele au 807.")
else if (langue =="MG")
	assert (message=="Tsy tafita ny fangatahanao. Naharay SMS manazava ny antony ianao. Raha ilaina, antsoy ny Service Clientele amin ny 807.")</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bda1759c-a477-4bcd-8c0a-54e7c959196e" name="Verify if an sms has sent"><con:configuration><token>This test should stay false while the sms has not been sent</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="b63b46b9-2368-45be-9802-83270e4d4a43" name="Try to buy recharge code"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to buy recharge code" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>${#Project#*111*1}*1*1*2*1*1*1*${#Project#PIN_MSISDN_pass_expired}${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="18bbc86b-252c-4813-94e7-79e1d1a1fcce" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy recharge code#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Votre demande n a pas abouti. Vous avez recu un SMS avec les details de votre transaction. Si besoin, contactez le Service Clientele au 807.")
else if (langue =="MG")
	assert (message=="Tsy tafita ny fangatahanao. Naharay SMS manazava ny antony ianao. Raha ilaina, antsoy ny Service Clientele amin ny 807.")</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0f62b354-2afd-42d9-9065-3e9c9e86474c" name="Verify if an sms has been sent"><con:configuration><token>This test should stay false while the sms has not been sent</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>22</con:value></con:property></con:properties></con:testCase><con:testCase id="6b92a458-fe95-4f25-9852-21299e3544c3" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Purchase a recharge code" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="9ff03d4e-ddca-4c87-8c55-1a629fe3f19d" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="5190f1e4-834c-4872-a209-c70af48653c8" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="6d1386ab-24df-413d-b0b7-8c8ee52658c8" name="Choose &quot;1 Credit pour mon numero&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="93840029-2716-4785-9942-d96b72f929b2" name="Choose 2 Code recharge"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Code recharge" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu"><con:configuration><token>Code recharge
1 Acheter code recharge
2 Renvoyer dernier achat
3 Renvoyer mes Codes Recharges</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="3fc6f17d-5253-41bd-9d7a-4ad3566dab1a" name="Choose 1 Acheter recharge code"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Acheter recharge code" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of the menu"><con:configuration><token>Choisir montant souhaite
1 Code Recharge 1000
2 Code Recharge 2000
3 Code Recharge 5000
4 Code Recharge 10000
5 Code Recharge 15000
# Page suivante</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="17168ec1-0a64-4d80-ab62-218654864f38" name="Choose 1 Code Recharge 1000"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Code Recharge 1000" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="deb9f831-256c-46f2-aafc-88ea5e1532a4" name="Check conformity of message"><con:configuration><token>Saisir nombre de code recharge souhaite: Entre 1 et 20:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="e557f145-74d4-4255-86b4-5c0c900694c0" name="Type valid number for recharge code 1000"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type valid number for recharge code 1000" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="d6a8e299-2d4a-4afc-8ce8-4d480d7559c5" name="Check conformity of message"><con:configuration><token>Pour confirmer l achat de 1*1000Ar soit 1000Ar de Code(s) Recharge(s), pour votre numero, entrer code secret MVola:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="226a029c-e28a-4f3f-aa80-09c340cee874" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="fad73468-d8fe-4247-aefd-88e63aab3696" name="Type invalid pin format (Escape or Character)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type invalid pin format (Escape or Character)" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>ab cd</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="31b24b30-76a0-4b08-ac8f-6af8f303539a" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="24471a50-7a3b-4566-bedc-77ba92803e52" name="Check conformity of error message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type invalid pin format (Escape or Character)#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	//Changemnet selon PROD assert (message=="Le code secret doit comporter 4 chiffres.")
	assert (message=="Pour confirmer l achat de 1*1000Ar soit 1000Ar de Code(s) Recharge(s), pour votre numero, entrer code secret MVola:")
}
else if (langue =="MG")
{
	assert (message=="Hamarino ny kaody miafina (tarehimarika 4).")
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="d815c2c6-1e66-4cab-8024-2f7abb0336f6" name="Type a valid Pin Mvola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid Pin Mvola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>¬£{#Project#PIN_MSISDN_1}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="31b24b30-76a0-4b08-ac8f-6af8f303539a" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="3b6c1662-bfeb-403b-88f8-1ce7ef9c2a41" name="Verify success message when purchase is performed"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid Pin Mvola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message.contains("Votre demande d'achat a r√©ussi. Ref: "))
	assert (message.contains(". Bravo, Bonus de 20 pourcent sur ce dernier rechargement, consultable via #357#."))
}
else if (langue =="MG")
{
	assert (message.contains("Tontosa ny fangatahanao. Ref: "))
	assert (message.contains(". Nahazo tombony 20 isan-jato ny fahana Telma nampidirinao, hita @ #357#."))
}</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="de43654f-72fa-4b1f-a1d2-2591a13b7c0f" name="Check the existence of a reference in the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid Pin Mvola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	referenceInStr=message[37..45]
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_perf_code_recharge_ok",referenceInStr)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Transac_ref",referenceInStr)
}	
else if (langue =="MG")
{
	referenceInStr=message[30..38]
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_perf_code_recharge_ok",referenceInStr)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Transac_ref",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>21</con:value></con:property></con:properties></con:testCase><con:testCase id="f5986506-1548-4209-aafc-4b5b2d5e4c01" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Resend last purchase in typing wrong trans ref" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="602904e9-ab26-4a3e-85bf-afe0fe88956b" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="833acf33-28a7-41a6-a889-daf73b0d2353" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="65aa3391-b08c-466b-adbc-ac5833046b2b" name="Choose &quot;1 Credit pour mon numero&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="55cef57c-006f-4b46-bc8c-d0457378705a" name="Choose 2 Code recharge"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Code recharge" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Code recharge
1 Acheter code recharge
2 Renvoyer dernier achat
3 Renvoyer mes Codes Recharges</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="cc6eb7f0-8cc0-4a62-b658-98a2d56f89a2" name="Resend last purchase in choosing 2 Renvoyer dernier achat"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Resend last purchase in choosing 2 Renvoyer dernier achat" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of message"><con:configuration><token>Pour renvoyer vos Code(s) Recharge(s) non encore consomme(s), saisir votre reference de transaction:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="282868fc-9cea-4b67-8a5f-e0873147caab" name="Type wrong transaction ref"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type wrong transaction ref" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>787515127</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of message"><con:configuration><token>Pour renvoyer vos Code(s) Recharge(s) non encore consomme(s), saisir votre reference de transaction:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="ae21dab8-2a50-449d-bac0-d23b91f1a504" name="Type valid transaction ref"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type valid transaction ref" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#Transac_ref}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="9a3216a4-c8ec-432c-aa35-9e9e14ada0b3" name="Check conformity of message"><con:configuration><token>Pour confirmer l achat de 1*1000Ar soit 1000Ar de Code(s) Recharge(s), pour votre numero, entrer code secret MVola:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>15</con:value></con:property></con:properties></con:testCase><con:testCase id="42ad1600-bd2d-4df2-bfb2-ff4e29fd2fe8" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Recharge code, select resend recharge code" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="57942fa7-8fce-47d7-9a68-14ced9841549" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c816fa92-5ddd-4f50-9a8f-9bd37c962a15" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="d4367aba-6433-44f5-a0f3-417635c83bc0" name="Choose &quot;1 Credit pour mon numero&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="8d37c5a3-96ca-40db-b7f5-2ac37199c7ad" name="Choose 2 Code recharge"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Code recharge" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Code recharge
1 Acheter code recharge
2 Renvoyer dernier achat
3 Renvoyer mes Codes Recharges</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="3ca236c3-7b1a-4b71-a046-fa1864992f05" name="Choose 3 Renvoyer mes Codes Recharges"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 3 Renvoyer mes Codes Recharges" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>3</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of message"><con:configuration><token>Pour renvoyer vos Code(s) Recharge(s) non consomme(s), entrer code secret MVola:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="b21d2f36-5550-469c-bdb0-6286c64b34cc" name="Type wrong Pin"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type wrong Pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>8d21</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="28d97ecc-5b01-4f22-aa95-64a4e2c199b5" name="Check the conformity of the message when pin is wrong"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type wrong Pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le code secret doit comporter 4 chiffres.")
else if (langue =="MG")
	assert (message=="Hamarino ny kaody miafina (tarehimarika 4).")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="9d8687b9-21a8-41f2-86f2-15d7e57b2c09" name="Type valid pin"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#PIN_MSISDN_1}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="d6a8e299-2d4a-4afc-8ce8-4d480d7559c5" name="Verify an sms has been sent in phone number"><con:configuration><token>This test should always be KO while the sms sent has not been verified</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>16</con:value></con:property></con:properties></con:testCase><con:testCase id="5032c148-fc73-4c88-995d-e35aec8de252" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Resend recharge code after typing pin invalid" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="a4e46538-ebd1-452b-a13a-9723eb363cc1" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="2d1d6f5f-2b2b-482e-9b44-6fc8d9c028a5" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="ad76dc42-f0db-490a-b053-478bd2dd31bb" name="Choose &quot;1 Credit pour mon numero&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="5cf82965-8735-40d4-9c44-456e10e6e94a" name="Choose 2 Code recharge"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Code recharge" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Code recharge
1 Acheter code recharge
2 Renvoyer dernier achat
3 Renvoyer mes Codes Recharges</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="b3c1b3d1-0195-4da5-bd18-72a9f0169dea" name="Choose 3 Renvoyer mes Codes Recharges"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 3 Renvoyer mes Codes Recharges" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>3</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of message"><con:configuration><token>Pour renvoyer vos Code(s) Recharge(s) non consomme(s), entrer code secret MVola:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="a4f65cae-c7da-4ec7-a7dd-29d6975a90da" name="Type wrong Pin"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type wrong Pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>85+ef1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="28d97ecc-5b01-4f22-aa95-64a4e2c199b5" name="Check the conformity of the message when pin is wrong"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type wrong Pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le code secret doit comporter 4 chiffres.")
else if (langue =="MG")
	assert (message=="Hamarino ny kaody miafina (tarehimarika 4).")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="3cce33f0-856f-43d3-af75-d7f917aea36a" name="Type valid pin"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#PIN_MSISDN_1}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="d6a8e299-2d4a-4afc-8ce8-4d480d7559c5" name="Verify an sms has been sent in phone number"><con:configuration><token>This test should always be KO while the sms sent has not been verified</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>17</con:value></con:property></con:properties></con:testCase><con:testCase id="015b6975-6ca0-45e6-9b90-2adcc032970b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Select recharge code in typing wrong number exceeded 3 retries" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="a0a0471b-b74f-491a-b2dd-ee7a7dae60a7" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="22a8dfdb-f781-40b1-9033-a0fa97df1d29" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="0d88c921-9691-40ae-91e8-7090c8c1f5e7" name="Choose &quot;1 Credit pour mon numero&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7342b36a-b4e1-4884-9a55-dbc0921b0cdd" name="Choose 2 Code recharge"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Code recharge" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Code recharge
1 Acheter code recharge
2 Renvoyer dernier achat
3 Renvoyer mes Codes Recharges</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="a35225fe-e105-437e-9b19-1c19dc455642" name="Choose 1 Acheter recharge code"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Acheter recharge code" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of the menu"><con:configuration><token>Choisir montant souhaite
1 Code Recharge 1000
2 Code Recharge 2000
3 Code Recharge 5000
4 Code Recharge 10000
5 Code Recharge 15000
# Page suivante</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="246b1432-712e-4f92-8bfb-00ea76bea42f" name="Choose 1 Code Recharge 1000"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Code Recharge 1000" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="deb9f831-256c-46f2-aafc-88ea5e1532a4" name="Check conformity of message"><con:configuration><token>Saisir nombre de code recharge souhaite: Entre 1 et 20:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="8d2938dc-51ef-4d3d-9096-f874b2180867" name="Type wrong number less than 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type wrong number less than 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>0</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="d6a8e299-2d4a-4afc-8ce8-4d480d7559c5" name="Check conformity of message"><con:configuration><token>Le nombre de Code Recharge n est pas valide. Veuillez entrer un nombre entre 1 et 20</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="226a029c-e28a-4f3f-aa80-09c340cee874" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="10a3b0de-f7ec-4189-8a59-612738131914" name="Type wrong number greater than 20"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type wrong number greater than 20" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>21</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="d6a8e299-2d4a-4afc-8ce8-4d480d7559c5" name="Check conformity of message"><con:configuration><token>Le nombre de Code Recharge n est pas valide. Veuillez entrer un nombre entre 1 et 20</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="31b24b30-76a0-4b08-ac8f-6af8f303539a" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="805cbbf4-959b-4630-85fa-4f5a817a2ca0" name="Type at 3 times wrong recharge code"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type at 3 times wrong recharge code" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>abcde147501234569874</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="d6a8e299-2d4a-4afc-8ce8-4d480d7559c5" name="Check conformity of message"><con:configuration><token>Le nombre d'essai maximum est atteint.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="31b24b30-76a0-4b08-ac8f-6af8f303539a" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>18</con:value></con:property></con:properties></con:testCase><con:testCase id="da6a36db-cef9-40fe-82ba-a867c7cbbaa7" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Pin invalid format in Recharge code" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="ada0c57a-94e9-47e9-acb4-46d0194882ba" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="e07c1472-304d-4dd4-9829-f04ac85df94c" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="33948247-9d1b-441c-8c89-04bda9bc12d0" name="Choose &quot;1 Credit pour mon numero&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="976c4622-b5db-4f68-90fa-dad6c9f5cdfd" name="Choose 2 Code recharge"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Code recharge" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Code recharge
1 Acheter code recharge
2 Renvoyer dernier achat
3 Renvoyer mes Codes Recharges</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="1f2ad506-c9e3-4f5b-8096-40bc5641704c" name="Choose 1 Acheter recharge code"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Acheter recharge code" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="01a2f5c9-b0eb-467b-a10d-f78f00957f32" name="Choose 1 Code Recharge 1000"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Code Recharge 1000" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="352e9a17-e24c-4949-9653-e981271ccd5f" name="Type valid number between 1 to 20"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type valid number between 1 to 20" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="d6a8e299-2d4a-4afc-8ce8-4d480d7559c5" name="Check conformity of message"><con:configuration><token>Pour confirmer l achat de 1*1000Ar soit 1000Ar de Code(s) Recharge(s), pour votre numero, entrer code secret MVola:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="226a029c-e28a-4f3f-aa80-09c340cee874" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="952757d5-387d-475a-a33f-96a5882f2f88" name="Type wrong pin format"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type wrong pin format" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>89@d5</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="31b24b30-76a0-4b08-ac8f-6af8f303539a" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="24471a50-7a3b-4566-bedc-77ba92803e52" name="Check conformity of error message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type invalid pin but in good format#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
//assert (message.contains("Le code secret saisi est incorrect. Ref: "))
assert (message.contains("Pour confirmer l achat de 1*1000Ar soit 1000Ar de Code(s) Recharge(s), pour votre numero, entrer code secret MVola:"))

</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="1a3eae6e-d966-4466-b5e7-7860e5387293" name="Check the existence of reference in message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type invalid pin but in good format#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
referenceInStr=message.drop(41)
int reference=referenceInStr.toInteger()
log.info ("REF: "+reference)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_code_recharge_pin_ko",referenceInStr)

	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="974aeef1-fac4-4604-8757-5725277783d4" name="Type again wrong pin format"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type again wrong pin format" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>ab 12</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="31b24b30-76a0-4b08-ac8f-6af8f303539a" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="de43654f-72fa-4b1f-a1d2-2591a13b7c0f" name="Check the message pin wrong format"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type wrong pin format#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour confirmer l achat de 1*1000Ar soit 1000Ar de Code(s) Recharge(s), pour votre numero, entrer code secret MVola:")
else if (langue =="MG")
	assert (message=="Hamarino ny kaody miafina (tarehimarika 4).")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="81c5308a-2c0e-4947-bfdb-504d23c5804e" name="Type invalid pin format limit exceeded (3 retries)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type invalid pin format limit exceeded (3 retries)" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>ab 12</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="31b24b30-76a0-4b08-ac8f-6af8f303539a" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="de43654f-72fa-4b1f-a1d2-2591a13b7c0f" name="Check the message pin wrong format"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type invalid pin format limit exceeded (3 retries)#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour confirmer l achat de 1*1000Ar soit 1000Ar de Code(s) Recharge(s), pour votre numero, entrer code secret MVola:")
else if (langue =="MG")
	assert (message=="Mihoatra ny fanandramana azo ekena.")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>19</con:value></con:property></con:properties></con:testCase><con:testCase id="3ca4e94a-15d1-4bfc-889a-2b60f33b05f7" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Perform Buy  code recharge failed ( Insufficient Solde Mvola)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="bfd121bc-e511-4013-ba37-b095075757b2" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="d917402a-86d7-4f2e-acc1-b9910e5447e0" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="38831bb1-5031-417e-b22e-b15070aaa36c" name="Choose &quot;1 Credit pour mon numero&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="969c76f5-4226-42f7-9f2b-a55f2949ac2e" name="Choose 2 Code recharge"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Code recharge" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="dbe6ba54-60cd-4999-9578-3f2c887f2b5b" name="Choose 1 Acheter recharge code"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Acheter recharge code" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="ae61b370-d54e-4cac-93a4-ff4ef16e5918" name="Choose 3 Code Recharge 5000"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 3 Code Recharge 5000" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>3</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="5169c2da-0fae-405d-b418-0b8cd82d9357" name="Type valid number 20"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type valid number 20" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>20</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="b3db4e75-c5fd-4699-9ffb-2902d84eaaf5" name="Type a valid pin"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#PIN_MSISDN_1}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of the message when user have no much balance"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
log.info ("Votre sole est de: "+solde)
if(langue =="FR")
	assert (message.contains("Votre solde MVola est insuffisant. Votre solde est de "+solde+"Ar. Faites un depot MVola suffisant pour pouvoir effectuer cette transaction. Ref: "))
else if (langue =="MG")
	assert (message.contains("Tsy tontosa ny fangatahanao noho ny volanao tsy ampy. Volanao sisa "+solde+"Ar. Mampidira vola ao anaty kaonty hanatontosana ny fifanakalozana. Ref: "))</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="0594238d-385e-4568-b2fe-62061c1cf342" name="Check the existence of a reference in the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	referenceInStr=message.drop(139)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_insuf_sold_code_recharge",referenceInStr)
}	
else if (langue =="MG")
{
	referenceInStr=message.drop(143)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_insuf_sold_code_recharge",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>20</con:value></con:property></con:properties></con:testCase><con:testCase id="9bc489fc-3d33-4999-b752-02160a40693c" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Perform buy recharge code with an agent who have not privileges" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="e61f7fef-ccf9-4b0c-b158-17f346ad8c1e" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="53e4020e-b8e0-4431-8267-817087a7e93f" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7b2bbe52-cb99-4147-b9e1-2753ad251e31" name="Choose &quot;1 Credit pour mon numero&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose &quot;1 Credit pour mon numero&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="6bb9183e-3110-4da5-8ff6-4a3dd8ad14ce" name="Choose 2 Code recharge"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Code recharge" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="e3efcfaf-0b8c-413a-8afd-b34311511de6" name="Choose 1 Acheter recharge code"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Acheter recharge code" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="eb28ad6c-8e93-47b0-80cd-24db75de8fff" name="Choose 1 Code Recharge 1000"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Code Recharge 1000" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="a36f7ab8-f970-4768-a929-f644aefd30bc" name="Type valid number for recharge code 1000"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type valid number for recharge code 1000" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="a958f315-5455-475e-ab43-8839cc73a57d" name="Type a valid pin"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>${#Project#PIN_MSISDN_access_denied}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="5b7031f1-dc48-4bbe-b2dd-da04f829f026" name="Check the conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message.contains("Votre demande n'a pas abouti. Vous n'avez pas acces a cette fonction. Si besoin, contactez le Service Clientele au 807. Ref: "))
else if (langue =="MG")
	assert (message.contains("Tsy tontosa ny fangatahanao. Tsy afaka manatontosa ity fifanakalozana ity ianao. Raha mila fanazavana fanampiny, antsoy ny 807. Ref: "))</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	referenceInStr=message.drop(125)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_code_recharge_access_denied",referenceInStr)
}	
else if (langue =="MG")
{
	referenceInStr=message.drop(133)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_code_recharge_access_denied",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="e4282d67-71a1-45c7-9d60-9839ec546cb1" name="Try to buy recharge code" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to buy recharge code" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>${#Project#*111*1}*1*1*2*1*1*1*${#Project#PIN_MSISDN_access_denied}${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8725ad76-a341-49d4-ba7d-ca8fe92405ab" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy recharge code#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message.contains("Votre demande n'a pas abouti. Vous n'avez pas acces a cette fonction. Si besoin, contactez le Service Clientele au 807. Ref: "))
else if (langue =="MG")
	assert (message.contains("Tsy tontosa ny fangatahanao. Tsy afaka manatontosa ity fifanakalozana ity ianao. Raha mila fanazavana fanampiny, antsoy ny 807. Ref: "))</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="a930ac9d-869e-4ce9-97b0-3bf80d7f179d" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy recharge code#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	referenceInStr=message.drop(125)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_code_recharge_access_denied",referenceInStr)
}	
else if (langue =="MG")
{
	referenceInStr=message.drop(133)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_code_recharge_access_denied",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>23</con:value></con:property></con:properties></con:testCase><con:testCase id="5cbb36f1-c064-4600-b2d7-20402f235235" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Pin blocked buy recharge" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="d35ee653-bf0c-4082-9d39-f24936bf5b2d" name="Type invalid pin in first time"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Type invalid pin in first time" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#*111*1}*1*1*1*1000*1234${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}914</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" id="16ffab29-c153-4697-9fce-1e94f74c61e4" name="Check the conformity of the message"><con:configuration><token>Le code secret saisi est incorrect. Ref: </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ee02b853-a884-403d-9376-7f23d12e6c5f" name="Check the existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type invalid pin in first time#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
referenceInStr=message.drop(41)
int reference=referenceInStr.toInteger()
log.info ("REF: "+reference)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_wrong_pin_buy_recharge",referenceInStr)</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c8111696-faea-4d27-b767-a50c0ec97d4b" name="Type invalid pin at 2nd time"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Type invalid pin at 2nd time" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#*111*1}*1*1*1*1000*1934${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}7657</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" id="16ffab29-c153-4697-9fce-1e94f74c61e4" name="Check the conformity of the message"><con:configuration><token>Le code secret saisi est incorrect. Ref: </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ee02b853-a884-403d-9376-7f23d12e6c5f" name="Check the existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type invalid pin at 2nd time#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
referenceInStr=message.drop(41)
int reference=referenceInStr.toInteger()
log.info ("REF: "+reference)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_wrong_pin_buy_recharge",referenceInStr)</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7d609d7e-00a9-47f0-a4c4-32ca92002df1" name="Type invalid pin at 3rd time"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Type invalid pin at 3rd time" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#*111*1}*1*1*1*1000*1334${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}757</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" id="16ffab29-c153-4697-9fce-1e94f74c61e4" name="Check the conformity of the message"><con:configuration><token>Votre demande n a pas abouti, Vous avez recu un SMS avec les details de votre transaction, Si besoin, contactez le Service Clintele au 807.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="145601b7-55e6-4373-b28c-28d724789d83" name="Verify if an sms has sent in phone number"><con:configuration><token>This test should stay failed while the sms is not sent yet</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>8</con:value></con:property></con:properties></con:testCase><con:testCase id="686ad08f-9fd7-48a0-a04c-a6719f73b9d4" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Pin blocked buy recharge code" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="7ad9db55-1892-47ab-8eec-2369c7245570" name="Type invalid pin in first time"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Type invalid pin in first time" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#*111*1}*1*1*2*1*1*1*1234${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}914</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="Simple Contains" id="16ffab29-c153-4697-9fce-1e94f74c61e4" name="Check the conformity of the message"><con:configuration><token>Le code secret saisi est incorrect. Ref: </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ee02b853-a884-403d-9376-7f23d12e6c5f" name="Check the existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type invalid pin in first time#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
referenceInStr=message.drop(41)
int reference=referenceInStr.toInteger()
log.info ("REF: "+reference)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_wrong_pin_buy_recharge",referenceInStr)</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="095c1760-8d41-43e6-bbc2-d96abd813353" name="Type invalid pin at 2nd time"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Type invalid pin at 2nd time" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#*111*1}*1*1*2*1*1*1*1234${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}7657</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="Simple Contains" id="16ffab29-c153-4697-9fce-1e94f74c61e4" name="Check the conformity of the message"><con:configuration><token>Le code secret saisi est incorrect. Ref: </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ee02b853-a884-403d-9376-7f23d12e6c5f" name="Check the existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type invalid pin at 2nd time#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
referenceInStr=message.drop(41)
int reference=referenceInStr.toInteger()
log.info ("REF: "+reference)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_wrong_pin_buy_recharge",referenceInStr)</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="5022d89a-6975-4bdd-8825-10499e0fa8ec" name="Type invalid pin at 3rd time"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Type invalid pin at 3rd time" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#*111*1}*1*1*2*1*1*1*1234${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}757</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="Simple Contains" id="16ffab29-c153-4697-9fce-1e94f74c61e4" name="Check the conformity of the message"><con:configuration><token>Votre demande n a pas abouti, Vous avez recu un SMS avec les details de votre transaction, Si besoin, contactez le Service Clintele au 807.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="145601b7-55e6-4373-b28c-28d724789d83" name="Verify if an sms has sent in phone number"><con:configuration><token>This test should stay failed while the sms is not sent yet</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>8</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>ServiceEndPoint</con:name><con:value>http://tarur1q:8040/services/tsUSSDGW</con:value></con:property></con:properties></con:testSuite><con:testSuite id="0253c7da-b6b4-46b3-aca6-a877bedeb1cf" name="Buy Recharge for Other Number"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="57bb64b0-5a0d-4cff-a5dd-bc3cd0c2d942" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Load the menu for recharge" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="6bd331d2-ff08-406f-95d7-129423c1c469" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="35e1f9d7-038c-4bfd-b30f-053f09120610" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="34bece78-63f7-4a4e-ba28-a23e0e76d922" name="Choose 2 Credit pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Credit pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu"><con:configuration><token>Credit a envoyer
1 Recharger directement
2 Code recharge</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>201</con:value></con:property></con:properties></con:testCase><con:testCase id="1025ccec-8466-43a4-ad67-fcfdf7552ee7" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Type wrong index menu execeeded 3 retries" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="23e53182-0dc0-4348-a7d7-b4a62477c4b3" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="890f1362-308d-4380-9c58-204e228040ff" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="546074f5-db59-4164-9089-4ab0969589af" name="Choose 2 Credit pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Credit pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="74cafbfd-be8c-4803-9a8e-cdac91bf0b9e" name="Type a number which doesn t exist into the menu"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a number which doesn t exist into the menu" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>3</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu"><con:configuration><token>Credit a envoyer
1 Recharger directement
2 Code recharge</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="8eeccf1e-afed-48de-af1c-6419a39417d3" name="Type again a number which doesn t exist into the menu"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type again a number which doesn t exist into the menu" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>4</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu"><con:configuration><token>Credit a envoyer
1 Recharger directement
2 Code recharge</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="13df6a0c-e609-4588-af46-91af15a632f5" name="Type at 3rd time number which doesn t exist into the menu"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type at 3rd time number which doesn t exist into the menu" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>5</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="69b769ff-d6a0-4194-981d-c2fd36dce54b" name="Check existence of submenu"><con:configuration><token>Credit a envoyer
1 Recharger directement
2 Code recharge</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>202</con:value></con:property></con:properties></con:testCase><con:testCase id="afb801c4-dcdb-40c0-b683-f09c9212650a" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Buy recharge for other in typing self number" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="7e85f16b-eced-43a6-a527-69fa80cbbcdc" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7d296957-3a44-4bad-a562-335408835001" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7ce190d6-2f9f-40c6-b42b-2a3c72717ba4" name="Choose 2 Credit pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Credit pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="32f653b7-112a-43fb-8112-ae40fc41b31a" name="Choose 1 Recharger directement"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu"><con:configuration><token>Entrer numero tel. : (Saisir 9 pour afficher le repertoire MVola)</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="8635902b-8911-4dc0-9018-49d5f4e48879" name="Type initiator number"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type initiator number" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#MSISDN_1}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of amount"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type initiator number#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Vous ne pouvez pas transferer de credit a votre numero. Merci de saisir un autre numero TELMA Mobile.")
else if (langue =="MG")
	assert (message=="Tsy afaka mamindra fahana mankany amin ny nomeraonao ianao. Mampidira nomerao TELMA Mobile hafa.")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>203</con:value></con:property></con:properties></con:testCase><con:testCase id="e3e5c85c-5fbd-4dd8-b86f-7e569358c7f3" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Type wrong phone number exceeded 3 retries" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="8cd700b0-b215-4d62-9096-78bbaa9dc643" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="27dd85ed-23e2-4a2b-bee8-b9e88776c794" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7a25cdee-c495-4cb4-ac73-1bfb283cba2c" name="Choose 2 Credit pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Credit pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="b56048ef-e821-40dc-aedf-dacb28613c5d" name="Choose 1 Recharger directement"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu"><con:configuration><token>Entrer numero tel. : (Saisir 9 pour afficher le repertoire MVola)</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="8723e3ee-ed0c-4973-a432-07fc8129d1cc" name="Type phone number contains Escape or special character"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type phone number contains Escape or special character" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>034 35 000 0+</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of amount"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type phone number contains Escape or special character#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
assert (message=="Verifier le numero de tel. Destinataire SVP (03 &amp; 8 chiffres)(Saisir 9 pour afficher le repertoire MVola)")
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="56f57637-817e-42b5-924f-9ec31471eaa4" name="Type wrong phone number"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type wrong phone number" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>034350004587</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of amount"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type wrong phone number#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
assert (message=="Verifier le numero de tel. Destinataire SVP (03 &amp; 8 chiffres)(Saisir 9 pour afficher le repertoire MVola)")
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="817cd46c-381e-4be2-8ba1-d6910b5e92b3" name="Type wrong phone number exceeded 3 retries"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type wrong phone number exceeded 3 retries" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>034350004587</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of amount"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type wrong phone number exceeded 3 retries#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue=="FR")
{
	assert (message=="Le nombre d'essai maximum est atteint.")
}
else if(langue =="MG")
{
	assert (message=="Mihoatra ny fanandramana azo ekena.")
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>204</con:value></con:property></con:properties></con:testCase><con:testCase id="b217d61b-91be-4e44-9d7c-01feceae97a6" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Test wrong amount" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="03012dfc-1a77-42fb-93c5-42bc68c5e720" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c0b94fd4-74ac-49b3-8d55-e0638b26aeed" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="84cdbeb1-05c6-4fba-9ba4-99bb17f72680" name="Choose 2 Credit pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Credit pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f2322a22-5354-4f80-a96a-66ee9b938ae8" name="Choose 1 Recharger directement"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="9b61b965-0895-4298-808d-1ac8671b6f0e" name="Type valid number of creditor"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type valid number of creditor" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#MSISDN_2}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89261857-bfd3-4057-8f7d-e1dc0cf7509b" name="Check the conformity of the submenu"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="0bb855a8-3bfb-468a-abd1-7660dfb4d752" name="Type wrong amount less than 100 Ar"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type wrong amount less than 100 Ar" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>99</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of amount"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type wrong amount less than 100 Ar#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Veuillez verifier le montant SVP (100 a 500 000 Ar)")
else if (langue =="MG")
	assert (message=="Hamarino ny sandan ny vola azafady (100Ar hatramin ny 500 000Ar)")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="a59b1d1c-0d62-4f18-84de-100cf9a99072" name="Typed wrong amount  greater than 500000 Ar"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Typed wrong amount  greater than 500000 Ar" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>500001</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of amount"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Typed wrong amount  greater than 500000 Ar#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Veuillez verifier le montant SVP (100 a 500 000 Ar)")
else if (langue =="MG")
	assert (message=="Hamarino ny sandan ny vola azafady (100Ar hatramin ny 500 000Ar)")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="b3832e00-0adb-4a52-9a8b-1adfc0b4a8ee" name="Test wrong amount execeeded (3 retries)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Test wrong amount execeeded (3 retries)" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>600000deef</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Test wrong amount execeeded (3 retries)#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le nombre d'essai maximum est atteint")
else if (langue =="MG")
	assert (message=="Mihoatra ny fanandramana azo ekena.")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>205</con:value></con:property></con:properties></con:testCase><con:testCase id="64be1b4e-1c60-42c3-91d8-3d236c728b39" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Perform buy recharge for other" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="9e4a04c7-509a-4e97-9e7e-6e0034291d6c" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="590315ba-8a4d-4d6d-8a43-7af2737c4729" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7000dc3a-1dac-48e6-a42b-d4a5c06010cb" name="Choose 2 Credit pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Credit pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f1a81409-7f8b-43f5-b001-c6cacad24274" name="Choose 1 Recharger directement"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="bdf70fe5-d051-4522-9102-5532fa6c3cf1" name="Type valid number of creditor"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type valid number of creditor" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#MSISDN_2}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7303fab3-a47e-4aef-9b5c-1b5a8ce00af5" name="Enter valid amount 1000 Ar"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Enter valid amount 1000 Ar" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1000</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope> 	]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Enter valid amount 1000 Ar#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
msisdn_2= messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("MSISDN_2")
msisdn_initial=msisdn_2.drop(3)
msisdn_credit="0"+msisdn_initial
log.info (msisdn_credit)
assert (message=="Pour accepter de recharger 1 000 Ar le numero "+msisdn_credit+" depuis votre compte MVola sur votre compte prepaye Entrer code secret:")
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="e5b384d8-887a-408f-a9b1-484363c5bea6" name="Type invalid pin format contained Escape or Character"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type invalid pin format contained Escape or Character" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>8 abc</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of pin"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type invalid pin format contained Escape or Character#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le code secret doit comporter 4 chiffres.")
else if (langue =="MG")
	assert (message=="Hamarino ny kaody miafina (tarehimarika 4).")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="fc07682b-1533-4d9e-8cd6-5ce1c976e0db" name="Type a valid Pin MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid Pin MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#PIN_MSISDN_1}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type a valid Pin MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message.contains("Votre demande d'achat a r√©ussi. Ref: "))
	assert (message.contains(". Bravo, Bonus de 20 pourcent sur ce dernier rechargement, consultable via #357#."))
}
else if (langue =="MG")
{
	assert (message.contains("Tontosa ny fangatahanao. Ref: "))
	assert (message.contains(". Nahazo tombony 20 isan-jato ny fahana Telma nampidirinao, hita @ #357#."))
}</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8b642415-6704-4e90-864e-71d9be761e08" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid Pin MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	referenceInStr=message[37..45]
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_buy_recharge_other_ok",referenceInStr)
}	
else if (langue =="MG")
{
	referenceInStr=message[30..38]
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_buy_recharge_other_ok",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>206</con:value></con:property></con:properties></con:testCase><con:testCase id="e05f31d8-c687-46c2-97e5-894844733866" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Type invalid pin format exceeded 3 retries" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="4186f1a6-c0a2-4e3a-8173-e83c8399497a" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c396c364-a563-4dc3-91dd-8f585607f00a" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="4b1caef0-678f-479f-92d0-be19eff3e9fd" name="Choose 2 Credit pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Credit pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="86df4029-d576-4c03-8be1-4ac2e5f63163" name="Choose 1 Recharger directement"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7a606a55-08ef-496a-9071-8dad3d5ff5df" name="Type valid number of creditor"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type valid number of creditor" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#MSISDN_2}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="5b2a8642-99f2-48a6-82ef-4bf0fc689b77" name="Enter valid amount 1000 Ar"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Enter valid amount 1000 Ar" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1000</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="2acbbcd5-32bf-4381-8615-136a857e9d5d" name="Type invalid pin format contained Escape or Character"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type invalid pin format contained Escape or Character" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>8 abc</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of pin"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type invalid pin format contained Escape or Character#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le code secret doit comporter 4 chiffres.")
else if (langue =="MG")
	assert (message=="Hamarino ny kaody miafina (tarehimarika 4).")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="af0888ca-f622-49e6-9981-f69ca7c3e726" name="Type again pin format invalid"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type again pin format invalid" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>8 abc</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of pin"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type again pin format invalid#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le code secret doit comporter 4 chiffres.")
else if (langue =="MG")
	assert (message=="Hamarino ny kaody miafina (tarehimarika 4).")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="868b6301-39ed-4c24-82e6-8edb3774ac0d" name="Type  pin format invalid exceeded 3 retries"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type  pin format invalid exceeded 3 retries" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>8 @bc</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of pin"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type  pin format invalid exceeded 3 retries#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le nombre d'essai maximum est atteint.")
else if (langue =="MG")
	assert (message=="Mihoatra ny fanandramana azo ekena.")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>207</con:value></con:property></con:properties></con:testCase><con:testCase id="f256176c-2422-476a-acd4-0d98ad3166bf" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Perform Buy recharge failed ( Insufficient Solde Mvola)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="4e8be40f-353d-4174-b9e4-75bdade5b79b" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="efb9ceaf-aaa9-4783-9098-59b6ba1ef51d" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="6a6b5b05-6a13-4b18-8282-1a5d84abc69f" name="Choose 2 Credit autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Credit autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f008cc45-e15f-4eda-9cc7-872390b3d606" name="Choose 1 Recharger directement"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="d73e5222-d696-4b82-8899-880ed668ec19" name="Type valid number of creditor"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type valid number of creditor" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#MSISDN_2}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="eb9b774d-ca30-42bb-9b34-224d530099d6" name="Enter amount which exede available balance"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Enter amount which exede available balance" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>100000</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Enter amount which exede available balance#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
msisdn_2= messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("MSISDN_2")
msisdn_initial=msisdn_2.drop(3)
msisdn_credit="0"+msisdn_initial
log.info (msisdn_credit)
assert (message=="Pour accepter de recharger 100 000 Ar le numero "+msisdn_credit+" depuis votre compte MVola sur votre compte prepaye\n"+
"Entrer code secret:")
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="8621f48a-9de5-4dc4-bc90-3e5086fb7693" name="Type a valid pin"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#PIN_MSISDN_1}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of the message when user have no much balance"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
log.info ("Votre sole est de: "+solde)
if(langue =="FR")
{
	assert (message.contains("Votre solde MVola est insuffisant. Votre solde est de "))
	assert (message.contains("Ar. Faites un depot MVola suffisant pour pouvoir effectuer cette transaction. Ref: "))
}
else if (langue =="MG")
{
	assert (message.contains("Tsy tontosa ny fangatahanao noho ny volanao tsy ampy. Volanao sisa "))
	assert (message.contains("Ar. Mampidira vola ao anaty kaonty hanatontosana ny fifanakalozana. Ref: "))
}</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="0594238d-385e-4568-b2fe-62061c1cf342" name="Check the existence of a reference in the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	referenceInStr=message.drop(message.lastIndexOf("Ref: ")+5)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_insuf_sold_recharge_other",referenceInStr)
}	
else if (langue =="MG")
{
	referenceInStr=message.drop(message.lastIndexOf("Ref: ")+5)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_insuf_sold_recharge_other",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ee5aa228-f7bf-4a25-9fdb-0df8d3c9ae2a" name="Check conformity of balance"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
//solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	assert message.contains("Ar.")
	solde=message[(message.lastIndexOf("est de ")+7)..(message.lastIndexOf("Ar")-1)]
	log.info solde
	assert solde ==~/^(\d{1,3})|[0-9]{1,3}()\s?([0-9]{3}\s?)+$/
}	
else if (langue =="MG")
{
	assert message.contains("Ar.")
	solde =message[(message.lastIndexOf("sisa ")+5)..(message.lastIndexOf("Ar")-1)]
	assert solde ==~/^(\d{1,3})|[0-9]{1,3}()\s?([0-9]{3}\s?)+$/
	log.info solde
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>209</con:value></con:property></con:properties></con:testCase><con:testCase id="d478d257-4955-4a31-b108-639b35dc70a0" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="The Agent attempting to access the system could not be found" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="cb6ca6b5-9aa0-4d5d-9084-8d7aa0f3184d" name="Show main menu MVola" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_have_not_MVola}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="ce290626-d1d9-42b3-9490-e89daa75b402" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_have_not_MVola}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="8bbfc8d3-4266-4e02-88e5-17bfd522c6d9" name="Choose 2 Credit pour autre numero" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Credit pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_have_not_MVola}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="30e78e07-64cd-49e5-babc-f4558c5dbb0a" name="Choose 1 Recharger directement" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_have_not_MVola}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="adca94d9-b71f-4e56-b7eb-41208aaa8189" name="Type valid number of creditor" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type valid number of creditor" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_have_not_MVola}</msisdn>\r
         <message>${#Project#MSISDN_2}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="6b33f55b-442d-40ce-8e8c-306ad446057b" name="Enter valid amount" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Enter valid amount" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_have_not_MVola}</msisdn>\r
         <message>100</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of confirm message" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Enter valid amount#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour accepter de recharger 100 Ar sur votre compte prepaye depuis votre compte MVola\n"+
"Entrer code secret:")
else if (langue =="MG")
	assert (message=="Raha manaiky hamahana 100 Ar ny kaonty prepaye-nao\n"+
"Ampidiro ny kaody miafina:")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="548493d2-da18-417d-b44a-330caf3fb786" name="Type a valid pin" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_have_not_MVola}</msisdn>\r
         <message>${#Project#PIN_MSISDN_not_MVola}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour pouvoir utiliser les services MVola, ouvrez gratuitement votre compte. Contactez votre Telma Shop ou Marchand MVola le plus proche !")
else if (langue =="MG")
	assert (message=="Raha te hampiasa tolotra M-Vola ianao dia manokafa kaonty maimaimpoana eny amin'ny Telma Shop na mpanjara akaikinao.")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="660a5cc1-15ca-436f-913f-8f22c9147662" name="Try to buy recharge for other"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to buy recharge for other" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_have_not_MVola}</msisdn>\r
         <message>${#Project#*111*1}*1*2*1*${#Project#MSISDN_2}*100*${#Project#PIN_MSISDN_not_MVola}${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}e</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="ee7f997f-8cd8-40fd-b0c5-0f5806e434b4" name="Check conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy recharge for other#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour pouvoir utiliser les services MVola, ouvrez gratuitement votre compte. Contactez votre Telma Shop ou Marchand MVola le plus proche !")
else if (langue =="MG")
	assert (message=="Raha te hampiasa tolotra M-Vola ianao dia manokafa kaonty maimaimpoana eny amin'ny Telma Shop na mpanjara akaikinao.")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapp473lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>211</con:value></con:property></con:properties></con:testCase><con:testCase id="137a9003-b866-430f-b81c-03cbbb97931c" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Agent's password has expired." searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="fbcf8252-e84c-4266-b1b3-fb866994fa44" name="Show main menu MVola" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="62663924-c641-4d0d-a51c-26e50fa98fbf" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f4c93c3e-20a4-4564-8e8b-886d993515b2" name="Choose 2 Credit pour autre numero" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Credit pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="698db44c-90c1-4052-8357-47372ac61e4c" name="Choose 1 Recharger directement" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="363771ec-d672-4fc3-839f-52e1f594a370" name="Type a valid number of creditor" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid number of creditor" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>${#Project#MSISDN_2}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="d5a41199-23b2-4fb2-935e-da10b386aecf" name="Enter valid amount" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Enter valid amount" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>100</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="12128c98-e43f-44fa-80aa-c07456f675a6" name="Type a valid pin" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>${#Project#PIN_MSISDN_pass_expired}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Votre demande n a pas abouti. Vous avez recu un SMS avec les details de votre transaction. Si besoin, contactez le Service Clientele au 807.")
else if (langue =="MG")
	assert (message=="Tsy tafita ny fangatahanao. Naharay SMS manazava ny antony ianao. Raha ilaina, antsoy ny Service Clientele amin ny 807.")</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bda1759c-a477-4bcd-8c0a-54e7c959196e" name="Verify if an sms has sent"><con:configuration><token>This test should stay false while the sms has not been sent</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="68e5190b-8278-4d81-8e81-553db9442e10" name="Try to buy recharge for other"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to buy recharge for other" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>${#Project#*111*1}*1*2*1*${#Project#MSISDN_2}*100*${#Project#PIN_MSISDN_pass_expired}${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="c7b931a3-f346-4921-91d1-23fbf462c554" name="Check the conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy recharge for other#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Votre demande n a pas abouti. Vous avez recu un SMS avec les details de votre transaction. Si besoin, contactez le Service Clientele au 807.")
else if (langue =="MG")
	assert (message=="Tsy tafita ny fangatahanao. Naharay SMS manazava ny antony ianao. Raha ilaina, antsoy ny Service Clientele amin ny 807.")</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3d4ca2e1-a0ad-4126-956b-6403c8cd0a74" name="Verify if sms is sent on phone number"><con:configuration><token>This test should be in failed while sms is not sent yet</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapp474lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>212</con:value></con:property></con:properties></con:testCase><con:testCase id="e53b45db-b7df-4119-9d0a-cd9ec7ea852e" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="The agent attempting have not privileges" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="74e5c5bf-5836-400c-81a0-f424bde2596e" name="Show main menu MVola" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="a0d29df3-a5d4-444c-8197-fa986811ff94" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="875dfdd4-4368-47cc-a26f-7db6b77d8271" name="Choose 2 Credit pour autre numero" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Credit pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="d664c481-4b07-459e-a77e-de1f1ff79d4e" name="Choose 1 Recharger directement" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="87bb1a5f-2711-49d1-9233-f5628bd83dd8" name="Type a valid number of creditor" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid number of creditor" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>${#Project#MSISDN_2}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7f428103-73a7-4412-bd8e-e3f11f9dcefd" name="Enter valid amount" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Enter valid amount" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>100</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of confirm message" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Enter valid amount#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour accepter de recharger 100 Ar sur votre compte prepaye depuis votre compte MVola\n"+
"Entrer code secret:")
else if (langue =="MG")
	assert (message=="Raha manaiky hamahana 100 Ar ny kaonty prepaye-nao\n"+
"Ampidiro ny kaody miafina:")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="ad893e65-d3a6-4481-a45c-3180cdf72f10" name="Type a valid pin" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>${#Project#PIN_MSISDN_access_denied}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="5b7031f1-dc48-4bbe-b2dd-da04f829f026" name="Check the conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message.contains("Votre demande n'a pas abouti. Vous n'avez pas acces a cette fonction. Si besoin, contactez le Service Clientele au 807. "))
else if (langue =="MG")
	assert (message.contains("Tsy tontosa ny fangatahanao. Tsy afaka manatontosa ity fifanakalozana ity ianao. Raha mila fanazavana fanampiny, antsoy ny 807. "))</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	referenceInStr=message.drop(125)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_access_denied_buy_other",referenceInStr)
}	
else if (langue =="MG")
{
	referenceInStr=message.drop(133)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_access_denied_buy_other",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="d2bc7a73-63b1-4848-ae7a-119d54a2881c" name="Try to buy recharge for other"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to buy recharge for other" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>${#Project#*111*1}*1*2*1*${#Project#MSISDN_2}*100*${#Project#PIN_MSISDN_access_denied}${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Check conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy recharge for other#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message.contains("Votre demande n'a pas abouti. Vous n'avez pas acces a cette fonction. Si besoin, contactez le Service Clientele au 807. "))
else if (langue =="MG")
	assert (message.contains("Tsy tontosa ny fangatahanao. Tsy afaka manatontosa ity fifanakalozana ity ianao. Raha mila fanazavana fanampiny, antsoy ny 807. "))</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="5c25e34b-3435-4384-b700-1bcce3ea277b" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy recharge for other#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	referenceInStr=message.drop(125)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_access_denied_buy_other",referenceInStr)
}	
else if (langue =="MG")
{
	referenceInStr=message.drop(133)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_access_denied_buy_other",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapp474lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>213</con:value></con:property></con:properties></con:testCase><con:testCase id="b6c9f60f-06d6-4799-934b-c7ff53eea716" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Perform buy recharge for a creditor who haven't account MVola" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="4d2f6299-9039-40e7-9e09-b88ded7fd830" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="02184a23-1e31-4707-950b-9e2ea4c3b23f" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="3acc5d95-c9d1-4a6c-941a-43d847bd1c5a" name="Choose 2 Credit pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Credit pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="5bd7f152-1b69-489f-b341-cbc85e4d7e29" name="Choose 1 Recharger directement"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f580817a-4236-4fe6-a8b7-f7e7449561ea" name="Type valid number of creditor"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type valid number of creditor" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#MSISDN_have_not_MVola}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c2b3e3e4-e145-4d54-8603-449d504ea640" name="Enter valid amount"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Enter valid amount" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>100</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of confirm message" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Enter valid amount#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour accepter de recharger 100 Ar sur votre compte prepaye depuis votre compte MVola\n"+
"Entrer code secret:")
else if (langue =="MG")
	assert (message=="Raha manaiky hamahana 100 Ar ny kaonty prepaye-nao\n"+
"Ampidiro ny kaody miafina:")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f01e1b2e-eb1d-4b4b-9acf-acd47683b956" name="Type a valid pin"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#PIN_MSISDN_1}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message.contains("Votre demande n'a pas abouti. Le numero saisi n'est pas enregistre aupres de MVola. Ref: "))
else if (langue =="MG")
	assert (message.contains("Tsy tontosa ny fangatahanao. Mbola tsy voarakitra ao @ MVola ny nomerao nampidirinao. Ref: "))</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="7ea8fdba-3ebc-4219-b54d-6be2c1d94461" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	referenceInStr=message.drop(89)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_creditor_have_no_account_buy_other",referenceInStr)
}	
else if (langue =="MG")
{
	referenceInStr=message.drop(91)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_creditor_have_no_account_buy_other",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>214</con:value></con:property></con:properties></con:testCase><con:testCase id="75192b30-d2a8-4461-be94-1f5445e39867" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Perform buy recharge for a inactive creditor" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true"><con:settings/><con:testStep type="request" id="5383cb2b-c6c8-4b12-a428-fa09d7e6f823" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="8952d265-26dc-4ca3-b1c2-d071dcdfa027" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="d2b1b159-3338-4083-af96-57158721ed7d" name="Choose 2 Credit pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Credit pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="8d05b5b7-2376-429d-997f-373af6bd1c06" name="Choose 1 Recharger directement"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="e1145291-54bb-4b1f-adff-0f83537376c1" name="Type valid number of inactive creditor"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type valid number of inactive creditor" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#MSISDN_inactive}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="d44cd26a-6446-4f6b-90ef-fbe27400d31b" name="Enter valid amount"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Enter valid amount" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>100</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of confirm message" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Enter valid amount#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour accepter de recharger 100 Ar sur votre compte prepaye depuis votre compte MVola\n"+
"Entrer code secret:")
else if (langue =="MG")
	assert (message=="Raha manaiky hamahana 100 Ar ny kaonty prepaye-nao\n"+
"Ampidiro ny kaody miafina:")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f8398e60-ff8f-496d-9dd8-82f417bddf5b" name="Type a valid pin"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#PIN_MSISDN_1}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour pouvoir utiliser les services MVola, ouvrez gratuitement votre compte. Contactez votre Telma Shop ou Marchand MVola le plus proche !")
else if (langue =="MG")
	assert (message=="Raha te hampiasa tolotra M-Vola ianao dia manokafa kaonty maimaimpoana eny amin'ny Telma Shop na mpanjara akaikinao.")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>215</con:value></con:property></con:properties></con:testCase><con:testCase id="742e0cae-deaf-4d12-8d80-70ddd005c135" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Perform buy recharge for a suspended creditor" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="ebedc858-9731-42dc-a95d-14f7537abb40" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="b1a671c8-1b70-41b4-b6a1-32b35c78f7ad" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="abce1a8c-7aea-40ab-b65c-1a6688e7011e" name="Choose 2 Credit pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Credit pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="a0370a6f-b98a-42fc-89c1-c557c560adb1" name="Choose 1 Recharger directement"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="bdb8736d-5d2c-45d8-88d4-89e984f47a1a" name="Type valid number of suspended creditor"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type valid number of suspended creditor" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#MSISDN_Suspended}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu" disabled="true"><con:configuration><token>Entrer montant:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="837efbca-e8f0-44e4-b5e7-2bb27906402b" name="Enter valid amount"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Enter valid amount" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>100</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d8aeddd-9129-49c2-98a2-78833bcdafd3" name="Check the conformity of confirm message" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Enter valid amount#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Pour accepter de recharger 100 Ar sur votre compte prepaye depuis votre compte MVola\n"+
"Entrer code secret:")
else if (langue =="MG")
	assert (message=="Raha manaiky hamahana 100 Ar ny kaonty prepaye-nao\n"+
"Ampidiro ny kaody miafina:")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="e6aeea0f-8895-414c-95cc-012899c43145" name="Type a valid pin"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#PIN_MSISDN_1}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="64bfd3c7-f754-434e-a8e7-c1f8ca8abe31" name="Check the conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
import java.util.regex.Pattern
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
log.info(message.drop(message.lastIndexOf("Ref:")+5))

//assert "a500"==~/a\d{1,3}/
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert message.contains("Votre demande n'a pas abouti. Le numero saisi n'a pas acces au service MVola pour le moment. Votre solde est de ")
}
else if (langue =="MG")
{
	assert message.contains("Tsy tontosa ny fangatahanao. Tsy afaka mampiasa MVola ny nomerao nampidirinao. Volanao sisa ")
}
</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="5cd973e7-8bdc-4d89-bce0-c939b21ad4ef" name="Check existence reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	assert message.contains("Ref: ")
	referenceInStr=message.drop(message.lastIndexOf("Ref: ")+5)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_suspended_buy_other",referenceInStr)
}	
else if (langue =="MG")
{
	assert message.contains("Ref: ")
	referenceInStr=message.drop(message.lastIndexOf("Ref: ")+5)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_suspended_buy_other",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="906e8fb5-7466-4823-b404-aec005d55c9e" name="Check conformity of balance"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
//solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	assert message.contains("Ar.")
	solde=message[(message.lastIndexOf("est de ")+7)..(message.lastIndexOf("Ar")-1)]
	log.info solde
	assert solde ==~/^(\d{1,3})|[0-9]{1,3}()\s?([0-9]{3}\s?)+$/
}	
else if (langue =="MG")
{
	assert message.contains("Ar.")
	solde =message[(message.lastIndexOf("sisa ")+5)..(message.lastIndexOf("Ar")-1)]
	assert solde ==~/^(\d{1,3})|[0-9]{1,3}()\s?([0-9]{3}\s?)+$/
	log.info solde
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>216</con:value></con:property></con:properties></con:testCase><con:testCase id="38af89a5-0791-4b88-a069-f8acd9e1dd2e" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Load Mvola Number Directories" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="a3b0e10d-ca3d-43f8-93a5-525b7e1bd081" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="cc1907e4-5241-494d-b976-fa81908a3873" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f628a2f5-76bf-4b94-9fd7-0e0f20df9754" name="Choose 2 Credit pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Credit pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu"><con:configuration><token/><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="e3025501-0174-46d4-a9a2-ecf7fb796667" name="Choose 1 Recharger directement"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 Recharger directement" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu"><con:configuration><token/><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="9a422509-8ed1-4533-afad-30039d825098" name="Type 9 to load directories MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type 9 to load directories MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>9</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity directory MVola"><con:configuration><token>Selectionner le contact:
1 Test</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>217</con:value></con:property></con:properties></con:testCase><con:testCase id="64abdb01-924e-46ab-96ea-e9ce4389521b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Buy recharge for Other (Recharge Code)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="251cc022-8313-4a6a-a80c-063a11b072fa" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="abc7d9e4-7b56-41de-bb8b-ca19dcf1c5a2" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c805e799-6a7d-43d5-9b65-5867666dd48e" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="2965ede9-5b38-4ce0-80d3-8caed035a476" name="Choose 2 Credit pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Credit pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="6c942c3f-94c7-44cf-90bd-276a27152523" name="Choose 2 Code recharge"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 Code recharge" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of sub menu"><con:configuration><token>Code recharge
1 Acheter code recharge
2 Renvoyer dernier achat</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="593c5cd1-fc1c-454e-ab1f-47a1ea1207f5" name="Resend last purchase in choosing 2 Renvoyer dernier achat" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Resend last purchase in choosing 2 Renvoyer dernier achat" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of message"><con:configuration><token>Pour renvoyer vos Codes(s) Recharge(s) non encore consomme(s), saisir votre reference de transaction:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="d509a8b0-8896-437a-b99b-6cb805a6bbc4" name="Type wrong transaction ref" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type wrong transaction ref" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>787515127</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="f4d23527-e25f-46a8-af61-4081f5d5650d" name="Check the conformity of message"><con:configuration><token>Pour renvoyer vos Codes(s) Recharge(s) non encore consomme(s), saisir votre reference de transaction:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tapp47</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="de969295-d654-4734-9c4a-06d350c5770c" name="Type valid transaction ref" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type valid transaction ref" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#Transac_ref}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="9a3216a4-c8ec-432c-aa35-9e9e14ada0b3" name="Check conformity of message"><con:configuration><token>Pour confirmer l achat de 1*1000Ar soit 1000Ar de Code(s) Recharge(s), pour votre numero, entrer code secret MVola:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>218</con:value></con:property></con:properties></con:testCase><con:testCase id="9cb44d26-2f00-4917-97ef-c32c5b20122f" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Pin blocked buy recharge" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="f7cc9c3e-cf4c-47ca-a09c-1dbbccbb1335" name="Type invalid pin in first time"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Type invalid pin in first time" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#*111*1}*1*2*1*${#Project#MSISDN_2}*1000*1296${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}df</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="Simple Contains" id="969018e1-65fa-45e1-9051-5d1b7e20812c" name="Check the conformity of message"><con:configuration><token>Le code secret saisi est incorrect. Ref: </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6391e53c-d784-4179-aac9-dcdbc18a248b" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type invalid pin in first time#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
referenceInStr=message.drop(41)
int reference=referenceInStr.toInteger()
log.info ("REF: "+reference)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_wrong_pin_buy_recharge_other",referenceInStr)</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="221bf9c4-e4e4-4c9b-8d11-c5611543c7c5" name="Type invalid pin in 2nd time"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Type invalid pin in 2nd time" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#*111*1}*1*2*1*${#Project#MSISDN_2}*1000*1296${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}ddf</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="Simple Contains" id="969018e1-65fa-45e1-9051-5d1b7e20812c" name="Check the conformity of message"><con:configuration><token>Le code secret saisi est incorrect. Ref: </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6391e53c-d784-4179-aac9-dcdbc18a248b" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type invalid pin in first time#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
referenceInStr=message.drop(41)
int reference=referenceInStr.toInteger()
log.info ("REF: "+reference)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_wrong_pin_buy_recharge_other",referenceInStr)</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="59aecac6-7cb3-41ee-85e3-256b2c6493c2" name="Type invalid pin in 3rd time"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Type invalid pin in 3rd time" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#*111*1}*1*2*1*${#Project#MSISDN_2}*1000*1296${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}dff</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="Simple Contains" id="969018e1-65fa-45e1-9051-5d1b7e20812c" name="Check the conformity of message"><con:configuration><token>Votre demande n a pas abouti, Vous avez recu un SMS avec les details de votre transaction, Si besoin, contactez le Service Clintele au 807.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d23b69f0-f5bc-40a4-ad73-b49869654951" name="Verify if an sms has sent into phone number"><con:configuration><token>This test should fail if a sms has not sent yet</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value>tapp473lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>208</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>ServiceEndPoint</con:name><con:value>http://tarur1q:8040/services/tsUSSDGW</con:value></con:property></con:properties></con:testSuite><con:testSuite id="b83db440-49f6-4034-af1f-e274a27c63ae" name="Buy offer for my number"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="e9fb76a5-4dd8-441a-a06c-1410da44cf92" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Load the menu bundle" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="1e4ad8a9-1de3-4442-8553-04c3056d1239" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="15c12501-e38d-4f75-9631-3af3a5272ef2" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="caa881ef-14fa-4652-bb2d-7988febceb86" name="Choose 4 offre pour mon numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 4 offre pour mon numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>4</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="9610029e-148b-4726-b80f-9a320daf8789" name="Check the conformity of the submenu"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Choose 4 offre pour mon numero#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message=="Votre offre tarifaire actuelle est TOKANA\n"+
"1 . MORA (VOIX - SMS - INTERNET)\n"+
"2 . FIRST (VOIX - SMS - INTERNET)\n"+
"3 . YELOW (SMS - INTERNET)\n"+
"4 . TELMA Net (INTERNET)")
}
else if (langue =="MG")
{
	assert (message=="Ny Tolotra misy anao ankehitriny dia TOKANA.\n"+
"1 . MORA (VOIX - SMS - INTERNET)\n"+
"2 . FIRST (VOIX - SMS - INTERNET)\n"+
"3 . YELOW (SMS - INTERNET)\n"+
"4 . TELMA Net (INTERNET)")
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>301</con:value></con:property></con:properties></con:testCase><con:testCase id="d2691b04-5186-412b-bbbd-932910f5cb7f" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Choose an offer" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="c2117ce9-1645-418d-9a17-0635f5a0441f" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c0ae06ee-144c-4854-9b91-8a4927bc3492" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="da875a92-4a95-418a-975b-e41ec22933d2" name="Choose 4 offre pour mon numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 4 offre pour mon numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>4</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f0bef6cd-dab6-4e61-9dfa-ee13c672ca42" name="Choose 1 MORA"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 MORA" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6f8890a1-fd77-4750-9c01-9bd58c3598d4" name="Check the conformity of the submenu"><con:configuration><token>MORA (VOIX - SMS - INTERNET)
1 . MORA 500 (500 Ar)
2 . MORA ONE (1000 Ar)
3 . MORA 2000 (2000 Ar)
4 . MORA 5000 (5000 Ar)
5 . MORA NIGHT (400 Ar)
# Page suivante</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>302</con:value></con:property></con:properties></con:testCase><con:testCase id="9c4997b5-5251-477c-82db-9e06565f757d" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Test offer not eligible" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="31cf2c67-5fd4-4e01-92a4-e7d778cedef2" name="Try to access menu MORA 500"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to access menu MORA 500" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_not_eligible}</msisdn>\r
         <message>${#Project#*111*1}*1*4*1*1${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Try to access menu MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ee8fe2f3-40bc-416c-8c3a-26067ede8c21" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to access menu MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message=="Vous ne pouvez pas acc√©der √† cette offre. Pour plus d'informations, veuillez contacter le service client Telma au 800 (Cout : 200 Ar/ Appel)")
}
else if (langue =="MG")
{
	assert (message=="Tsy afaka misafidy io tolotra io ianao. Raha mila fanazavana fanampiny, antsoy ny service client Telma 800 (Sandany : 200 Ar/ Antso)")
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>303</con:value></con:property></con:properties></con:testCase><con:testCase id="1ef1970d-7d3c-4b53-b1ec-f2b95897430c" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Buy an offer" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="bb04c905-4fb9-4adf-b9f4-425d8ec1b6bb" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="b3d6b4be-5d14-40c8-9818-dd0b6e159c70" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="a58f8319-bf34-451c-927a-10317f38aa25" name="Choose 4 offre pour mon numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 4 offre pour mon numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>4</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="58fa873c-4e61-460e-ade2-96adc409c540" name="Choose 1 MORA"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 MORA" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="78da020b-f977-4a40-8b32-ff74e0f2f954" name="Choose 1 MORA 500"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 MORA 500" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6dd17163-efe0-4253-8ec7-1fb776bf43a1" name="Check conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Choose 1 MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message=="Pour confirmer le paiement de l'offre MORA 500 via MVola d'un montant de 500 Ar, Entrer code secret :")
}
else if (langue =="MG")
{
	assert (message=="Raha manaiky handoa ny tolotra MORA 500 mitentina 500 Ar amin'ny MVola, Ampidiro ny kaody miafina :")
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="9e5a2a0a-e384-4e8c-a135-6b9ed0be7f95" name="Type a pin valid"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a pin valid" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#PIN_MSISDN_1}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="b558f798-b846-4d2d-af18-aae154153077" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type a pin valid#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message.contains("Votre demande d'achat a r√©ussi. Ref: "))
	assert (message.contains(". Bravo, Bonus de 20 pourcent sur ce dernier rechargement, consultable via #357#."))
}
else if (langue =="MG")
{
	assert (message.contains("Tontosa ny fangatahanao. Ref: "))
	assert (message.contains(". Nahazo tombony 20 isan-jato ny fahana Telma nampidirinao, hita @ #357#."))
}</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="d4381521-0c51-4294-a107-0a43fa9eb476" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a pin valid#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	referenceInStr= message[(message.lastIndexOf("Ref")+5)..((message.lastIndexOf("Bravo")-3))]
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_buy_offer_ok",referenceInStr)
}	
else if (langue =="MG")
{
	referenceInStr= message[(message.lastIndexOf("Ref")+5)..((message.lastIndexOf("Nahazo")-3))]
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_buy_offer_ok",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>304</con:value></con:property></con:properties></con:testCase><con:testCase id="17febec1-291e-4b20-872f-28afb031fbcf" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Type invalid pin format limit exceeded (3 retries)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="8f69f888-95ba-48e9-ab02-40dddc241792" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="640b6289-2bb2-43b9-a03d-1f4124aaecc6" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7931aeab-a35a-49d5-a64e-de6279e9326c" name="Choose 4 offre pour mon numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 4 offre pour mon numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>4</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="fe88d365-e65e-40c8-87f9-597530443e9b" name="Choose 1 MORA"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 MORA" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="52a157be-4a30-4bc2-8669-1f8c318255c3" name="Choose 1 MORA 500"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 MORA 500" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="82cfbe86-6285-49a4-91d9-3139a75adbf6" name="Type invalid pin format contained Escape or Character"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type invalid pin format contained Escape or Character" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>ab c</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="862e59c9-9286-4ad9-a0ca-245269ea1cf4" name="Check the conformity of Pin format"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type invalid pin format contained Escape or Character#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le code secret doit comporter 4 chiffres.")
else if (langue =="MG")
	assert (message=="Hamarino ny kaody miafina (tarehimarika 4).")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="0c3efd38-5ee9-40e7-acfc-e0ce49c2373a" name="Type invalid pin format"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type invalid pin format" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>ab c</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="862e59c9-9286-4ad9-a0ca-245269ea1cf4" name="Check the conformity of Pin format"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type invalid pin format#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le code secret doit comporter 4 chiffres.")
else if (langue =="MG")
	assert (message=="Hamarino ny kaody miafina (tarehimarika 4).")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="8d3ea480-81e6-4f1e-9879-396c2376dec8" name="Type pin format invalid exceeded 3 retries"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type pin format invalid exceeded 3 retries" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>ab@c</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="862e59c9-9286-4ad9-a0ca-245269ea1cf4" name="Check the conformity of message "><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type pin format invalid exceeded 3 retries#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le nombre d'essai maximum est atteint")
else if (langue =="MG")
	assert (message=="Mihoatra ny fanandramana azo ekena.")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>305</con:value></con:property></con:properties></con:testCase><con:testCase id="3c454c0c-d1b7-4586-bd7b-7e7b46c9422a" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Buy offer with an agent who have not account MVola" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="100bd3d8-046b-43cb-8a1b-333e09306329" name="Try to buy MORA 500"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to buy MORA 500" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_have_not_MVola}</msisdn>\r
         <message>${#Project#*111*1}*1*4*1*1*${#Project#PIN_MSISDN_not_MVola}${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ee8fe2f3-40bc-416c-8c3a-26067ede8c21" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message=="Pour pouvoir utiliser les services MVola, ouvrez gratuitement votre compte. Contactez votre Telma Shop ou Marchand MVola le plus proche !")
}
else if (langue =="MG")
{
	assert (message=="Raha te hampiasa tolotra M-Vola ianao dia manokafa kaonty maimaimpoana eny amin'ny Telma Shop na mpanjara akaikinao.")
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>308</con:value></con:property></con:properties></con:testCase><con:testCase id="df02fd3c-7f00-41a6-bbe2-1a1a76e46985" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Buy an offer with insufficient balance MVola" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="e548f89b-bc89-4ce2-b4ba-c1087b1b4f44" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="6aacb11d-4dc3-4b62-a617-216f17aea26b" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="1ee52746-05a0-4f75-9d41-04e529b75620" name="Choose 4 offre pour mon numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 4 offre pour mon numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>4</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="0ac3ae19-14b5-4584-bf16-291ff3005a8c" name="Choose 1 MORA"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 MORA" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="ed14ef10-aae4-4269-b4f6-f5a561de3d49" name="Choose 4 MORA+ 5000"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 4 MORA+ 5000" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>4</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6dd17163-efe0-4253-8ec7-1fb776bf43a1" name="Check conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Choose 4 MORA+ 5000#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message=="Pour confirmer le paiement de l'offre MORA+ 5000 via MVola d'un montant de 5000 Ar, Entrer code secret:")
}
else if (langue =="MG")
{
	assert (message=="Raha manaiky handoa ny tolotra MORA+ 5000 mitentina 5000 Ar amin'ny MVola, Ampidiro ny kaody miafina :")
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="03a7a688-371f-475b-9746-1d5e308c7c03" name="Type a valid pin"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#PIN_MSISDN_1}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="cca45d2f-1b11-4d5f-ae3e-fed15573322e" name="Check the conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
log.info ("Votre sole est de: "+solde)
if(langue =="FR")
{
	assert (message.contains("Votre solde MVola est insuffisant. Votre solde est de "))
	assert (message.contains("Ar. Faites un depot MVola suffisant pour pouvoir effectuer cette transaction. Ref: "))
}
else if (langue =="MG")
{
	assert (message.contains("Tsy tontosa ny fangatahanao noho ny volanao tsy ampy. Volanao sisa "))
	assert (message.contains("Ar. Mampidira vola ao anaty kaonty hanatontosana ny fifanakalozana. Ref: "))
}</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="1290cfc5-3396-4671-a7bb-803fe33faf97" name="Check existence of reference in message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	referenceInStr=message.drop(message.lastIndexOf("Ref: ")+5)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_insuf_sold_buy_offer",referenceInStr)
}	
else if (langue =="MG")
{
	referenceInStr=message.drop(message.lastIndexOf("Ref: ")+5)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_insuf_sold_buy_offer",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="047d13ab-92b2-4292-b6bf-f808ea92f514" name="Check the conformity of balance"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
//solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	assert message.contains("Ar.")
	solde=message[(message.lastIndexOf("est de ")+7)..(message.lastIndexOf("Ar")-1)]
	log.info solde
	assert solde ==~/^(\d{1,3})|[0-9]{1,3}()\s?([0-9]{3}\s?)+$/
}	
else if (langue =="MG")
{
	assert message.contains("Ar.")
	solde =message[(message.lastIndexOf("sisa ")+5)..(message.lastIndexOf("Ar")-1)]
	assert solde ==~/^(\d{1,3})|[0-9]{1,3}()\s?([0-9]{3}\s?)+$/
	log.info solde
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>307</con:value></con:property></con:properties></con:testCase><con:testCase id="d8202143-d8e6-47dc-a96b-7a72bcfccae7" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Agent s password has expired" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="c88004d8-549b-4eaa-b25d-0c650bdec8c7" name="Try to buy MORA 500"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to buy MORA 500" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>${#Project#*111*1}*1*4*1*1*${#Project#PIN_MSISDN_pass_expired}${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ee8fe2f3-40bc-416c-8c3a-26067ede8c21" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message=="Votre demande n a pas abouti. Vous avez recu un SMS avec les details de votre transaction. Si besoin, contactez le Service Clientele au 807.")
}
else if (langue =="MG")
{
	assert (message=="Tsy tafita ny fangatahanao. Naharay SMS manazava ny antony ianao. Raha ilaina, antsoy ny Service Clientele amin ny 807.")
}
</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" id="65e27f35-d2e1-4cca-affe-ab0f33473aa1" name="Verify if a sms has sent"><con:configuration><token>This test should stay fail while a sms has not yet sent</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>309</con:value></con:property></con:properties></con:testCase><con:testCase id="b2b72b8b-bc42-42f7-8dd8-58c78b103ff0" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="The agent attempting to buy offer have not privileges" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="18abcdd5-00e7-4a3c-8ace-469416cd97a7" name="Try to buy MORA 500"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to buy MORA 500" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>${#Project#*111*1}*1*4*1*1*${#Project#PIN_MSISDN_access_denied}${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ee8fe2f3-40bc-416c-8c3a-26067ede8c21" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message.contains("Votre demande n'a pas abouti. Vous n'avez pas acces a cette fonction. Si besoin, contactez le Service Clientele au 807. Ref: "))
}
else if (langue =="MG")
{
	assert (message.contains("Tsy tontosa ny fangatahanao. Tsy afaka manatontosa ity fifanakalozana ity ianao. Raha mila fanazavana fanampiny, antsoy ny 807. Ref: "))
}
</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="9a5d820d-c10e-48a4-b4d0-2f81ad3f2f1a" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
referenceInStr=message.drop(message.lastIndexOf("Ref")+5)
int reference=referenceInStr.toInteger()
log.info ("REF: "+reference)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_buy_offer_access_denied",referenceInStr)</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>310</con:value></con:property></con:properties></con:testCase><con:testCase id="1f3f0629-f6dc-417d-9b1a-f16afb8bb936" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Choose a offer TELMA Net" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="5ee4e55d-49e0-4a30-93e8-8c33f8de3f6d" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="8d477e20-3716-42a8-afbf-bf33dfe23a76" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="097df9cf-f950-4719-8889-ab9a7e25642d" name="Choose 4 offre pour mon numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 4 offre pour mon numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>4</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="37255363-9264-480b-9d18-96834ad53f44" name="Choose 4 TELMA Net"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 4 TELMA Net" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>4</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="2944e3bd-dce0-4d4c-95f1-f9c095e3f478" name="Check the conformity of submenu"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Choose 4 TELMA Net#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
assert (message =="TELMA Net (INTERNET)\n"+
"1 . NET JOURNALIER\n"+
"2 . NET HEBDOMADAIRE\n"+
"3 . NET MENSUEL (&lt; 10 Go)\n"+
"4 . NET MENSUEL + (>= 10 Go)\n"+
"5 . NET PAYER MENSUALITES EN AVANCE")
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="fa22372d-902f-4ed2-b99c-f016c446cde5" name="Choose 1 NET JOURNALIER"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 NET JOURNALIER" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="28caa8c4-89bd-4e37-bdc8-377c1c86d2da" name="Check the conformity of submenu"><con:configuration><token>NET JOURNALIER
1 . NET ONE NIGHT (100 Ar)
2 . NET ONE DAY (1000 Ar)</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="d79c7a6b-d296-43b8-934e-d5facf1d3be1" name="Choose 2 NET ONE DAY"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 NET ONE DAY" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="2944e3bd-dce0-4d4c-95f1-f9c095e3f478" name="Check the conformity of submenu"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Choose 2 NET ONE DAY#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if (langue == "FR")
	assert (message=="Pour confirmer le paiement de l'offre NET ONE DAY via MVola d'un montant de 1000 Ar, Entrer code secret :")
else if (langue =="MG")
	assert (message=="Raha manaiky handoa ny tolotra NET ONE DAY mitentina 1000 Ar amin'ny Mvola, Ampidiro ny kaody miafina :")

</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>354e</con:value></con:property></con:properties></con:testCase><con:testCase id="6b4064dc-e01a-441a-9353-0afad2dd6ee0" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Pin blocked" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="465346b8-45e6-4b81-8dbb-0eabcfc22e45" name="Type invalid pin in 1st time"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Type invalid pin in 1st time" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#*111*1}*1*4*1*1*0888${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}tru</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="Simple Contains" id="c111cc0c-252a-4c7a-81db-bc3f6e88af89" name="Check the conformity of the message"><con:configuration><token>Le code secret saisi est incorrect. Ref: </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="3fb9803c-fd5c-4a69-9bc9-c9941f5d559a" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type invalid pin in 1st time#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
referenceInStr=message.drop(41)
int reference=referenceInStr.toInteger()
log.info ("REF: "+reference)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_wrong_pin_buy_offer",referenceInStr)</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c549399b-6559-4123-94a9-6e321439429a" name="Type invalid pin at 2nd time"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Type invalid pin at 2nd time" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#*111*1}*1*4*1*1*0888${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}trdfu</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="Simple Contains" id="c111cc0c-252a-4c7a-81db-bc3f6e88af89" name="Check the conformity of the message"><con:configuration><token>Le code secret saisi est incorrect. Ref: </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="3fb9803c-fd5c-4a69-9bc9-c9941f5d559a" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type invalid pin at 2nd time#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
referenceInStr=message.drop(41)
int reference=referenceInStr.toInteger()
log.info ("REF: "+reference)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_wrong_pin_buy_offer",referenceInStr)</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="435a5da5-538e-471c-be6d-94d866bf4d78" name="Type invalid pin at 3rd timed"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Type invalid pin at 3rd timed" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#*111*1}*1*4*1*1*0888${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}trufd</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="Simple Contains" id="c111cc0c-252a-4c7a-81db-bc3f6e88af89" name="Check the conformity of the message"><con:configuration><token>Votre demande n a pas abouti, Vous avez recu un SMS avec les details de votre transaction, Si besoin, contactez le Service Clintele au 807.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="17673bec-8103-44ed-a68b-5191edc603e9" name="Verify if an sms has sent in a phone number"><con:configuration><token>This test should stay in fail until an sms has not sent to a phone number</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>306</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>ServiceEndPoint</con:name><con:value>http://tarur1q:8040/services/tsUSSDGW</con:value></con:property></con:properties></con:testSuite><con:testSuite id="8467b8d9-2c5a-4d8b-9715-7bf9f99c33e4" name="Buy offer for Other Number"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="6eac85ad-7648-4b4b-9b65-404808496b61" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Load the menu bundle" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="ade2c24c-3c67-4c94-97eb-de4c24f087fc" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="010e5f5b-e7d6-41f1-b96f-0c29d160b04d" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f76771cd-1567-448f-91c8-ab6ab7bf67f4" name="Choose 5 offre pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 5 offre pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>5</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="882c5c2e-38a9-4bc3-b760-20890e8e91f8" name="Check fonformity of submenu"><con:configuration><token>Entrer numero tel. : (Saisir 9 pour afficher le repertoire MVola)</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="ae967374-0e16-4df4-b751-428d5653e494" name="Type a valid phone number"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid phone number" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#MSISDN_2}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="9610029e-148b-4726-b80f-9a320daf8789" name="Check the conformity of the submenu"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid phone number#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message=="ENVOYER UNE OFFRE\n"+
"1 . MORA (VOIX - SMS - INTERNET)\n"+
"2 . FIRST (VOIX - SMS - INTERNET)\n"+
"3 . YELOW (SMS - INTERNET)\n"+
"4 . TELMA Net (INTERNET)")
}
else if (langue =="MG")
{
	assert (message=="HANDEFA TOLOTRA\n"+
"1 . MORA (VOIX - SMS - INTERNET)\n"+
"2 . FIRST (VOIX - SMS - INTERNET)\n"+
"3 . YELOW (SMS - INTERNET)\n"+
"4 . TELMA Net (INTERNET)")
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>401</con:value></con:property></con:properties></con:testCase><con:testCase id="1883580f-b97f-4f61-ba19-4be1e40fda5c" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Buy offer for other in typing my number" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="62ef0b73-e25b-4563-b284-5ef114f6be3d" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="ac18b18f-6693-4af8-b7f0-ee59f2be659d" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c7ac1c28-74b8-4f5f-9eaa-434cb3af9ade" name="Choose 5 offre pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 5 offre pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>5</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="489e2eb0-21a0-4acf-a2c2-ea5d22696c36" name="Type initiator number"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type initiator number" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#MSISDN_1}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="9610029e-148b-4726-b80f-9a320daf8789" name="Check the conformity of the submenu"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type initiator number#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message=="Vous ne pouvez pas transferer de credit a votre numero. Merci de saisir un autre numero TELMA Mobile.")
}
else if (langue =="MG")
{
	assert (message=="Tsy afaka mamindra fahana mankany amin ny nomeraonao ianao. Mampidira nomerao TELMA Mobile hafa.")
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>402</con:value></con:property></con:properties></con:testCase><con:testCase id="3efd7d4f-9e12-440c-ae23-9223417a8700" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Buy offer for other in typing number postpaid" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="8a231456-2a63-4d99-8f63-ab14083f3a6a" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="13db6677-cce9-438f-95b7-90b1120e6a08" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="b3eb2490-8f27-4efe-b231-53dcddd2642d" name="Choose 5 offre pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 5 offre pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>5</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="dbd1f98c-bc02-4bed-871a-91b055e9488b" name="Type a postpaid number"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a postpaid number" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#MSISDN_postpaid}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="9610029e-148b-4726-b80f-9a320daf8789" name="Check the conformity of the submenu"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a postpaid number#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message=="Desole, les abonnes Postpaye Telma Mobile ne peuvent pas beneficier de ce service.")
}
else if (langue =="MG")
{
	assert (message=="Tsy afaka mampiasa ity servisy ity ny mpamandrika Postpaye Telma Mobile.")
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>403</con:value></con:property></con:properties></con:testCase><con:testCase id="3ab13371-d5c6-4fc4-9f55-69e6912fb8cf" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Buy offer for other in typing  wrong format number" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="e734fb54-c0fb-4044-9eca-db66095af157" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="39af75ed-988c-476e-ae31-09782d78601c" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="2daaf01f-be5e-4541-b8b0-31e34f3b61f6" name="Choose 5 offre pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 5 offre pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>5</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="4e9949f7-d227-4bdf-80b5-8ac3a81da837" name="Type phone number contain escape and special Character"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type phone number contain escape and special Character" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>034 35 000 0@</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="9610029e-148b-4726-b80f-9a320daf8789" name="Check the conformity of the submenu"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type phone number contain escape and special Character#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message=="Verifier le numero de tel. Destinataire SVP (03 &amp; 8 chiffres) (Saisir 9 pour afficher le repertoire MVola)")
}
else if (langue =="MG")
{
	assert (message=="Hamarino ny nomerao azafady (03 &amp; tarehimarika 8)")
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="1dcba70e-2b63-497f-a075-8b7e151454f3" name="Type phone in numeric but bad format"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type phone in numeric but bad format" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>034350000</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="9610029e-148b-4726-b80f-9a320daf8789" name="Check the conformity of the submenu"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type phone in numeric but bad format#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message=="Verifier le numero de tel. Destinataire SVP (03 &amp; 8 chiffres) (Saisir 9 pour afficher le repertoire MVola)")
}
else if (langue =="MG")
{
	assert (message=="Hamarino ny nomerao azafady (03 &amp; tarehimarika 8)")
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="5bd08d1d-3434-4260-8cde-23c6b8fa9aab" name="Type invalid phone number exceeded 3 retries"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type invalid phone number exceeded 3 retries" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>034350000987</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="9610029e-148b-4726-b80f-9a320daf8789" name="Check the conformity of the submenu"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type invalid phone number exceeded 3 retries#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message=="Le nombre d'essai maximum est atteint.")
}
else if (langue =="MG")
{
	assert (message=="Mihoatra ny fanandramana azo ekena.")
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>404</con:value></con:property></con:properties></con:testCase><con:testCase id="094dbe81-32df-420c-897e-70846cc0783a" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Load MVola number directories" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="d85c75f1-4480-4bf4-9c1f-3f4b365dffba" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="4f5d735f-1af5-450d-910d-e7614ae3eeb7" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="5efb92e1-e94b-47ee-be13-7de559ad0a89" name="Choose 5 offre pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 5 offre pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>5</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="438d4237-8f2b-48ff-97c0-1fb8c09f8698" name="Type 9 to load MVola number directories"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type 9 to load MVola number directories" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>9</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d747bc22-8547-4215-990b-166e09f63791" name="Check conformity of directory"><con:configuration><token>Selectionner le contact:
1 Test</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="507c604d-4a13-4620-9604-9d8e81077ed4" name="Type a number outside the list"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a number outside the list" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>9</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9a89ca01-2ec4-4dab-ab28-10ba6981fc54" name="Check conformity of directory"><con:configuration><token>Selectionner le contact:
1 Test</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="37077902-3405-46f2-a6c5-8bdd6dc57984" name="Choose a number in the list"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose a number in the list" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="9610029e-148b-4726-b80f-9a320daf8789" name="Check the conformity of the submenu"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Choose a number in the list#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message=="ENVOYER UNE OFFRE\n"+
"1 . MORA (VOIX - SMS - INTERNET)\n"+
"2 . FIRST (VOIX - SMS - INTERNET)\n"+
"3 . YELOW (SMS - INTERNET)\n"+
"4 . TELMA Net (INTERNET)")
}
else if (langue =="MG")
{
	assert (message=="HANDEFA TOLOTRA\n"+
"1 . MORA (VOIX - SMS - INTERNET)\n"+
"2 . FIRST (VOIX - SMS - INTERNET)\n"+
"3 . YELOW (SMS - INTERNET)\n"+
"4 . TELMA Net (INTERNET)")
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>405</con:value></con:property></con:properties></con:testCase><con:testCase id="5dc4a708-9d4c-4ad4-a4bc-fdef51eba842" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Choose an offer" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="a7605bf7-1d8b-438c-96ac-7aeea54e8312" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="78425400-fa2c-4ddd-9fb4-5caf2f245193" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="18fd3bcb-1026-40f6-a8a2-28479e4ba528" name="Choose 5 offre pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 5 offre pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>5</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="bfa19350-b04e-48e4-b2a1-8a298d8478d2" name="Type 9 to load MVola number directories"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type 9 to load MVola number directories" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>9</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="79e28aed-fc4c-4851-9654-671ef91da705" name="Type a number in the list"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a number in the list" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="9702fa43-2553-4bce-b2e2-43a70404eebe" name="Choose 1 MORA"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 MORA" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6f8890a1-fd77-4750-9c01-9bd58c3598d4" name="Check the conformity of the submenu"><con:configuration><token>MORA (VOIX - SMS - INTERNET)
1 . MORA 500 (500 Ar)
2 . MORA ONE (1000 Ar)
3 . MORA 2000 (2000 Ar)
4 . MORA 5000 (5000 Ar)
5 . MORA NIGHT (400 Ar)
# Page suivante</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>406</con:value></con:property></con:properties></con:testCase><con:testCase id="a8f1ec9b-f64d-499a-a6df-8659068c0242" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Test offer not eligible" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="779ebbf8-34f1-4694-98b8-ca4ed81c4188" name="Try to access menu MORA 500"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to access menu MORA 500" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_not_eligible}</msisdn>\r
         <message>${#Project#*111*1}*1*5*${#Project#MSISDN_2}*1*1${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Try to access menu MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ee8fe2f3-40bc-416c-8c3a-26067ede8c21" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to access menu MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message=="Vous ne pouvez pas acc√©der √† cette offre. Pour plus d'informations, veuillez contacter le service client Telma au 800 (Cout : 200 Ar/ Appel)")
}
else if (langue =="MG")
{
	assert (message=="Tsy afaka misafidy io tolotra io ianao. Raha mila fanazavana fanampiny, antsoy ny service client Telma 800 (Sandany : 200 Ar/ Antso)")
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>407</con:value></con:property></con:properties></con:testCase><con:testCase id="b2094dcf-146c-4e7a-8b6a-2f2e83347e3e" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Buy an offer" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="6cd8b8e5-54aa-4d3a-bdc3-f7eea3666d57" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="dfe65e20-b55c-427e-abf1-8629db13dd97" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="94f73aa3-68d6-4e65-ace7-88b913403921" name="Choose 5 offre pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 5 offre pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>5</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="25c7092f-733d-46b3-8e6f-51b46424416f" name="Type a valid  phone number"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid  phone number" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#MSISDN_2}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="e0472289-8911-4138-88a0-cd4471b83add" name="Choose 1 MORA"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 MORA" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="6f512ad9-5f17-41d1-a1fb-0f88b838db91" name="Choose 1 MORA 500"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 MORA 500" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6dd17163-efe0-4253-8ec7-1fb776bf43a1" name="Check conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Choose 1 MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
msisdn_2= messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("MSISDN_2")
msisdn_initial=msisdn_2.drop(3)
msisdn_credit="0"+msisdn_initial
log.info (msisdn_credit)
assert (message=="Pour accepter d'acheter l'offre MORA 500 d'un montant de 500Ar pour le "+msisdn_credit+" depuis votre compte MVola, Entrer code secret :")
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="41337777-867d-488c-9fec-8183e8e4c6f4" name="Type a pin valid"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a pin valid" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#PIN_MSISDN_1}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="541fc1f7-60d7-40ff-8519-42d5452bdb75" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type a pin valid#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message.contains("Votre demande d'achat a r√©ussi. Ref: "))
	assert (message.contains(". Bravo, Bonus de 20 pourcent sur ce dernier rechargement, consultable via #357#."))
}
else if (langue =="MG")
{
	assert (message.contains("Tontosa ny fangatahanao. Ref: "))
	assert (message.contains(". Nahazo tombony 20 isan-jato ny fahana Telma nampidirinao, hita @ #357#."))
}</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="9dab825b-7075-444b-bd17-92d3d04d0566" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a pin valid#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	referenceInStr=message[37..45]
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_buy_offer_other_ok",referenceInStr)
}	
else if (langue =="MG")
{
	referenceInStr=message[30..38]
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_buy_offer_other_ok",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>408</con:value></con:property></con:properties></con:testCase><con:testCase id="b3ee4772-05e3-484e-a88d-c7fd87c28604" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Type invalid pin format limit exceeded (3 retries)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="ca2c7a93-949e-4082-8430-b029d4974aa1" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="62a9259a-2e58-49f8-bb4a-82ae39f08868" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="b0ac1df2-e032-4309-bf87-dcdc7923a6a0" name="Choose 5 offre pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 5 offre pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>5</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="49b0d1db-b0d7-4214-bb80-564bf7943c7f" name="Type a valid phone number"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid phone number" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#MSISDN_2}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="28664bed-ce34-4480-86cf-e4889feee77a" name="Choose 1 MORA"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 MORA" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="42172628-2d09-4bc1-8e52-7fb7d87750bd" name="Choose 1 MORA 500"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 MORA 500" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7beae42c-18c5-4896-af9b-032a9645f2a7" name="Type invalid pin format contained Escape or Character"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type invalid pin format contained Escape or Character" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>ab c</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="862e59c9-9286-4ad9-a0ca-245269ea1cf4" name="Check the conformity of Pin format"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type invalid pin format contained Escape or Character#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le code secret doit comporter 4 chiffres.")
else if (langue =="MG")
	assert (message=="Hamarino ny kaody miafina (tarehimarika 4).")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="fa8a0911-ea28-46bb-9fef-193153b07a3c" name="Type invalid pin format"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type invalid pin format" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>ab c</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="862e59c9-9286-4ad9-a0ca-245269ea1cf4" name="Check the conformity of Pin format"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type invalid pin format#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le code secret doit comporter 4 chiffres.")
else if (langue =="MG")
	assert (message=="Hamarino ny kaody miafina (tarehimarika 4).")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="29f1fff0-de1e-4ec3-bf17-59568e82b880" name="Type pin format invalid exceeded 3 retries"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type pin format invalid exceeded 3 retries" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>ab@c</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="862e59c9-9286-4ad9-a0ca-245269ea1cf4" name="Check the conformity of message "><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Type pin format invalid exceeded 3 retries#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
	assert (message=="Le nombre d'essai maximum est atteint.")
else if (langue =="MG")
	assert (message=="Mihoatra ny fanandramana azo ekena.")</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>409</con:value></con:property></con:properties></con:testCase><con:testCase id="547ee7ad-294e-4b94-b48c-a749cf056e9d" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Buy an offer with insufficient balance MVola" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="8b9c5246-2557-46b2-b184-5d7fbae5a1fa" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="ca8527c5-32df-4a56-bb0e-2bd9f92dcff8" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="4472049e-8946-492a-bbb9-ae7668935f83" name="Choose 5 offre pour autre"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 5 offre pour autre" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>5</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="4e782508-5c4a-4555-8cb3-51c420d85939" name="Type a valid phone number"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid phone number" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#MSISDN_2}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="6924b8c1-82d3-4dbe-b104-0f6af98722cb" name="Choose 1 MORA"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 MORA" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7e675a0a-b52c-4ea1-8261-4c7eab53bafd" name="Choose 4 MORA+ 5000"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 4 MORA+ 5000" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>4</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6dd17163-efe0-4253-8ec7-1fb776bf43a1" name="Check conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Choose 4 MORA+ 5000#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
msisdn = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("MSISDN_2")
msisdn_credit="0"+msisdn.drop(3)
log.info(msisdn_credit)
if(langue =="FR")
{
	assert (message=="Pour accepter d'acheter l'offre MORA+ 5000 d'un montant de 5000Ar pour le "+msisdn_credit+" depuis votre compte MVola, Entrer code secret :")
}
else if (langue =="MG")
{
	assert (message=="Raha manaiky handoa ny tolotra MORA+ 5000 mitentina 5000 Ar amin'ny MVola, Ampidiro ny kaody miafina :")
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="fb2e7c1d-ba30-44af-98e0-f0d6c563a1a8" name="Type a valid pin"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid pin" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#PIN_MSISDN_1}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="cca45d2f-1b11-4d5f-ae3e-fed15573322e" name="Check the conformity of the message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
log.info ("Votre sole est de: "+solde)
if(langue =="FR")
{
	assert (message.contains("Votre solde MVola est insuffisant. Votre solde est de "))
	assert (message.contains("Ar. Faites un depot MVola suffisant pour pouvoir effectuer cette transaction. Ref: "))
}
else if (langue =="MG")
{
	assert (message.contains("Tsy tontosa ny fangatahanao noho ny volanao tsy ampy. Volanao sisa "))
	assert (message.contains("Ar. Mampidira vola ao anaty kaonty hanatontosana ny fifanakalozana. Ref: "))
}</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="1290cfc5-3396-4671-a7bb-803fe33faf97" name="Check existence of reference in message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	referenceInStr=message.drop(message.lastIndexOf("Ref: ")+5)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_insuf_sold_buy_offer_other",referenceInStr)
}	
else if (langue =="MG")
{
	referenceInStr=message.drop(message.lastIndexOf("Ref: ")+5)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_insuf_sold_buy_offer_other",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="047d13ab-92b2-4292-b6bf-f808ea92f514" name="Check the conformity of balance"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type a valid pin#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
//solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	assert message.contains("Ar.")
	solde=message[(message.lastIndexOf("est de ")+7)..(message.lastIndexOf("Ar")-1)]
	log.info solde
	assert solde ==~/^(\d{1,3})|[0-9]{1,3}()\s?([0-9]{3}\s?)+$/
}	
else if (langue =="MG")
{
	assert message.contains("Ar.")
	solde =message[(message.lastIndexOf("sisa ")+5)..(message.lastIndexOf("Ar")-1)]
	assert solde ==~/^(\d{1,3})|[0-9]{1,3}()\s?([0-9]{3}\s?)+$/
	log.info solde
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>411</con:value></con:property></con:properties></con:testCase><con:testCase id="226278e5-a752-4bae-b98c-2fcfa49b7df8" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Buy offer with an agent who have not account MVola" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="d6cb882a-7cd2-4e6a-a6de-13d3a96883e0" name="Try to buy MORA 500"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to buy MORA 500" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_have_not_MVola}</msisdn>\r
         <message>${#Project#*111*1}*1*5*${#Project#MSISDN_2}*1*1*${#Project#PIN_MSISDN_not_MVola}${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ee8fe2f3-40bc-416c-8c3a-26067ede8c21" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message=="Pour pouvoir utiliser les services MVola, ouvrez gratuitement votre compte. Contactez votre Telma Shop ou Marchand MVola le plus proche !")
}
else if (langue =="MG")
{
	assert (message=="Raha te hampiasa tolotra M-Vola ianao dia manokafa kaonty maimaimpoana eny amin'ny Telma Shop na mpanjara akaikinao.")
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>412</con:value></con:property></con:properties></con:testCase><con:testCase id="a887b359-4781-4ee4-b674-c3443608e155" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Agent s password has expired" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="0bb7c27a-80c1-4abb-92f6-13af205d1ebe" name="Try to buy MORA 500"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to buy MORA 500" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_pass_expired}</msisdn>\r
         <message>${#Project#*111*1}*1*5*${#Project#MSISDN_2}*1*1*${#Project#PIN_MSISDN_pass_expired}${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ee8fe2f3-40bc-416c-8c3a-26067ede8c21" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message=="Votre demande n a pas abouti. Vous avez recu un SMS avec les details de votre transaction. Si besoin, contactez le Service Clientele au 807.")
}
else if (langue =="MG")
{
	assert (message=="Tsy tafita ny fangatahanao. Naharay SMS manazava ny antony ianao. Raha ilaina, antsoy ny Service Clientele amin ny 807.")
}
</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" id="65e27f35-d2e1-4cca-affe-ab0f33473aa1" name="Verify if a sms has sent"><con:configuration><token>This test should stay fail while a sms has not yet sent</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>413</con:value></con:property></con:properties></con:testCase><con:testCase id="b87d9b5d-d5b7-4639-8bae-52c45807f56e" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="The agent attempting to buy offer have not privileges" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="fe0cd871-a6d3-4702-bc8a-2b2e8698a4fa" name="Try to buy MORA 500"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to buy MORA 500" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_access_denied}</msisdn>\r
         <message>${#Project#*111*1}*1*5*${#Project#MSISDN_2}*1*1*${#Project#PIN_MSISDN_access_denied}${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ee8fe2f3-40bc-416c-8c3a-26067ede8c21" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message.contains("Votre demande n'a pas abouti. Vous n'avez pas acces a cette fonction. Si besoin, contactez le Service Clientele au 807. Ref: "))
}
else if (langue =="MG")
{
	assert (message.contains("Tsy tontosa ny fangatahanao. Tsy afaka manatontosa ity fifanakalozana ity ianao. Raha mila fanazavana fanampiny, antsoy ny 807. Ref: "))
}
</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="9a5d820d-c10e-48a4-b4d0-2f81ad3f2f1a" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
referenceInStr=message.drop(message.lastIndexOf("Ref")+5)
int reference=referenceInStr.toInteger()
log.info ("REF: "+reference)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_buy_offer_other_access_denied",referenceInStr)</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>414</con:value></con:property></con:properties></con:testCase><con:testCase id="a335f747-aca3-4698-b740-5cac76c3cc71" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="The target Agent is suspended" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="0afc3214-2d8a-44f3-9c9e-d8f7b1180539" name="Try to buy MORA 500"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to buy MORA 500" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#*111*1}*1*5*${#Project#MSISDN_Suspended}*1*1*${#Project#PIN_MSISDN_1}${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="7008f8ce-ae2b-4ed4-8755-f43089d75890" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
import java.util.regex.Pattern
addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
log.info(message.drop(message.lastIndexOf("Ref:")+5))

//assert "a500"==~/a\d{1,3}/
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert message.contains("Votre demande n'a pas abouti. Le numero saisi n'a pas acces au service MVola pour le moment. Votre solde est de ")
}
else if (langue =="MG")
{
	assert message.contains("Tsy tontosa ny fangatahanao. Tsy afaka mampiasa MVola ny nomerao nampidirinao. Volanao sisa ")
}
</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="3a292e6c-1cd2-4940-9a51-7a119f62d84a" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	assert message.contains("Ref: ")
	referenceInStr=message.drop(message.lastIndexOf("Ref: ")+5)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_suspended_creditor_buy_offer",referenceInStr)
}	
else if (langue =="MG")
{
	assert message.contains("Ref: ")
	referenceInStr=message.drop(message.lastIndexOf("Ref: ")+5)
	int reference=referenceInStr.toInteger()
	log.info ("REF: "+reference)
	messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_suspended_creditor_buy_offer",referenceInStr)
}
	</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8a401cfd-d705-4f8b-968e-a17de43bddfc" name="Check the conformity of balance"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
//solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
if(langue =="FR")
{
	assert message.contains("Ar.")
	solde=message[(message.lastIndexOf("est de ")+7)..(message.lastIndexOf("Ar")-1)]
	log.info solde
	assert solde ==~/^(\d{1,3})|[0-9]{1,3}()\s?([0-9]{3}\s?)+$/
}	
else if (langue =="MG")
{
	assert message.contains("Ar.")
	solde =message[(message.lastIndexOf("sisa ")+5)..(message.lastIndexOf("Ar")-1)]
	assert solde ==~/^(\d{1,3})|[0-9]{1,3}()\s?([0-9]{3}\s?)+$/
	log.info solde
}
	</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>416</con:value></con:property></con:properties></con:testCase><con:testCase id="d1a3f7ab-27f7-46ed-a33c-41b590c4362a" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="The target Agent has not account MVola" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="0c6b0fbb-571d-4979-825e-e5a4d4bed519" name="Try to buy MORA 500"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to buy MORA 500" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#*111*1}*1*5*${#Project#MSISDN_have_not_MVola}*1*1*${#Project#PIN_MSISDN_1}${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ee8fe2f3-40bc-416c-8c3a-26067ede8c21" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message.contains("Votre demande n'a pas abouti. Le numero saisi n'est pas enregistre aupres de MVola. Ref: "))
}
else if (langue =="MG")
{
	assert (message.contains("Tsy tontosa ny fangatahanao. Mbola tsy voarakitra ao @ MVola ny nomerao nampidirinao. Ref: "))
}
</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="9a5d820d-c10e-48a4-b4d0-2f81ad3f2f1a" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
referenceInStr=message.drop(message.lastIndexOf("Ref")+5)
int reference=referenceInStr.toInteger()
log.info ("REF: "+reference)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_buy_offer_other_creditor_no_MVola",referenceInStr)</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>415</con:value></con:property></con:properties></con:testCase><con:testCase id="95e158d8-d771-4b1a-96d0-66b2dfc9725c" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="The target Agent is not active" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="3711d0d0-e128-4924-b672-e83d58dba300" name="Try to buy MORA 500"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Try to buy MORA 500" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#*111*1}*1*5*${#Project#MSISDN_inactive}*1*1*${#Project#PIN_MSISDN_1}${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ee8fe2f3-40bc-416c-8c3a-26067ede8c21" name="Check the conformity of message"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Try to buy MORA 500#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
if(langue =="FR")
{
	assert (message.contains("Pour pouvoir utiliser les services MVola, ouvrez gratuitement votre compte. Contactez votre Telma Shop ou Marchand MVola le plus proche !"))
}
else if (langue =="MG")
{
	assert (message.contains("Raha te hampiasa tolotra M-Vola ianao dia manokafa kaonty maimaimpoana eny amin'ny Telma Shop na mpanjara akaikinao."))
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>415</con:value></con:property></con:properties></con:testCase><con:testCase id="d8363531-5708-4888-b2af-0a60ecd3dcaa" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Choose a offer TELMA Net" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="e921ab92-995c-45bf-afcc-666289f84dcd" name="Show main menu MVola"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Show main menu MVola" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#ShortCode}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="8f79c717-bcac-4661-9506-e0aa77ce8ee0" name="Pass hostname value into the next steps"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Show main menu MVola#Response}')
AddXMLHolder=new XmlHolder(addResponse)
hostname=AddXMLHolder.getNodeValue('//*:hostname')
messageExchange.modelItem.testStep.testCase.setPropertyValue( "hostname", hostname)
log.info hostname</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="02242258-da55-43fd-bab8-4cef2c082f3b" name="Choose menu &quot;1 Acheter credit ou offre telma&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose menu &quot;1 Acheter credit ou offre telma&quot;" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="fcc4a989-a6b9-4ec0-84e4-387c1c179968" name="Choose 5 offre pour autre numero"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 5 offre pour autre numero" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>5</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="8287d2bf-3728-4093-9d34-77ee8c486cc3" name="Type a valid  phone number"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Type a valid  phone number" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#MSISDN_2}</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="97793491-39cd-4fb5-a572-34dfcddfd3de" name="Choose 4 TELMA Net"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 4 TELMA Net" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>4</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="53c16b2d-ce14-4cbf-a115-54a762545c43" name="Check the conformity of submenu"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Choose 4 TELMA Net#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
assert (message =="TELMA Net (INTERNET)\n"+
"1 . NET JOURNALIER\n"+
"2 . NET HEBDOMADAIRE\n"+
"3 . NET MENSUEL (&lt; 10 Go)\n"+
"4 . NET MENSUEL + (>= 10 Go)\n"+
"5 . NET PAYER MENSUALITES EN AVANCE")
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="71294fb8-cd82-4ee4-b8a0-37443afd60dd" name="Choose 1 NET JOURNALIER"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 1 NET JOURNALIER" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>1</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tapp47&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="caa6dc0c-1578-4a9a-87f1-a98b2a5fd00e" name="Check the conformity of submenu"><con:configuration><token>NET JOURNALIER
1 . NET ONE NIGHT (100 Ar)
2 . NET ONE DAY (1000 Ar)</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="74f624c4-d244-41e3-a955-9edd635aed33" name="Choose 2 NET ONE DAY"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetSubMenu</con:operation><con:request name="Choose 2 NET ONE DAY" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9461015f-f086-43fe-9344-5417416d2cbd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetSubMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>2</message>\r
         <hostname>${#TestCase#hostname}</hostname>\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetSubMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3b2f2dd-862d-4a98-9170-6bbf1b36370e" name="SOAP Response"/><con:assertion type="Simple Contains" id="8fb090ae-de78-4070-8e43-cd7903d14f1c" name="Check if a node hostname contains &quot;tap&quot;" disabled="true"><con:configuration><token>tap</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="e5d71bfb-41d7-4308-a56e-b27b5af4daf4" name="Check the conformity of submenu"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

addResponse=context.expand('${Choose 2 NET ONE DAY#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
msisdn_2= messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("MSISDN_2")
msisdn_initial=msisdn_2.drop(3)
msisdn_credit="0"+msisdn_initial
log.info (msisdn_credit)
if(langue == "FR")
	assert (message=="Pour accepter d'acheter l'offre NET ONE DAY d'un montant de 1000Ar pour le "+msisdn_credit+" depuis votre compte MVola, Entrer code secret :")
else if(langue == "MG")
	assert (message=="Pour accepter d'acheter l'offre NET ONE DAY d'un montant de 1000Ar pour le "+msisdn_credit+" depuis votre compte MVola, Entrer code secret :")
	
</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>417</con:value></con:property></con:properties></con:testCase><con:testCase id="36577a85-a892-4eb7-9212-19b0b76ed6c8" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Test pin blocked" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" id="4f895208-66f0-4644-a5ca-8bdcb6ba249e" name="Type invalid pin in 1st time"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Type invalid pin in 1st time" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#*111*1}*1*5*${#Project#MSISDN_2}*1*1*0888${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="Simple Contains" id="18e4f0f5-9b63-4a85-acee-7ac5f4735ba6" name="Check the conformity of message"><con:configuration><token>Le code secret saisi est incorrect. Ref: </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="de331587-f5ed-4870-8321-8a43e4c37c77" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type invalid pin in 1st time#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
referenceInStr=message.drop(41)
int reference=referenceInStr.toInteger()
log.info ("REF: "+reference)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_wrong_pin_buy_offer_other",referenceInStr)</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="e151d2af-fb8c-4a2f-8fc9-6b31fd3bd6be" name="Type invalid pin in 2nd time"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Type invalid pin in 2nd time" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#*111*1}*1*5*${#Project#MSISDN_2}*1*1*0888${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="Simple Contains" id="18e4f0f5-9b63-4a85-acee-7ac5f4735ba6" name="Check the conformity of message"><con:configuration><token>Le code secret saisi est incorrect. Ref: </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="de331587-f5ed-4870-8321-8a43e4c37c77" name="Check existence of reference"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder
addResponse=context.expand('${Type invalid pin in 2nd time#Response}')
AddXMLHolder=new XmlHolder(addResponse)
message=AddXMLHolder.getNodeValue('//*:menu')
langue = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Langue")
solde = messageExchange.modelItem.testStep.testCase.testSuite.project.getPropertyValue("Solde_MSISDN_insuffisant")
referenceInStr=message.drop(41)
int reference=referenceInStr.toInteger()
log.info ("REF: "+reference)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("Ref_wrong_pin_buy_offer_other",referenceInStr)</scriptText></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="434af1fe-d724-4e09-a121-fad20d2b2264" name="Type invalid pin at 3rd time"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>tsUSSDGWBinding</con:interface><con:operation>tsGetFirstMenu</con:operation><con:request name="Type invalid pin at 3rd time" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" id="b0d52725-6dab-41fa-8b87-4a7a7e307488"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#End point}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <urn:tsGetFirstMenuRequest>\r
         <msisdn>${#Project#MSISDN_1}</msisdn>\r
         <message>${#Project#*111*1}*1*5*${#Project#MSISDN_2}*1*1*0888${#Project#Diese}</message>\r
         <!--Optional:-->\r
         <sessionid>${#TestCase#sessionId}</sessionid>\r
         <!--Optional:-->\r
         <channel>${#Project#USSD_channel}</channel>\r
      </urn:tsGetFirstMenuRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0bf08689-2856-4132-aafb-dfaf279346ed" name="SOAP Response"/><con:assertion type="Simple Contains" id="18e4f0f5-9b63-4a85-acee-7ac5f4735ba6" name="Check the conformity of message"><con:configuration><token>Votre demande n a pas abouti, Vous avez recu un SMS avec les details de votre transaction, Si besoin, contactez le Service Clintele au 807.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a6056e77-4029-46e8-8442-4c2780ae03cb" name="Verify if an sms is sent in a phone number"><con:configuration><token>This test should stay in fail while the sms has not sent yet</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>hostname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">tapt463lv</con:value></con:property><con:property><con:name>sessionId</con:name><con:value>410</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>ServiceEndPoint</con:name><con:value>http://tarur1q:8040/services/tsUSSDGW</con:value></con:property></con:properties></con:testSuite><con:testSuite id="4bb464ed-9366-42e4-afbd-71d23b4c5240" name="Library" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="c3fe120e-44f8-4ab3-ae6f-95976330cb55" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Reporting_Utility" searchProperties="true"><con:settings/><con:testStep type="groovy" name="GenerateCSVReport" id="c30c520c-8538-49ad-a62a-49b670f71f74"><con:settings/><con:config><script>// Try-catch block to handle exceptions
try {

// 1. Create a "SoapUIResults" folder in the project path 
      // Retrieve the project root folder
      def projectPath = new com.eviware.soapui.support.GroovyUtils(context).projectPath

      // Specify a folder inside project root to store the results
      String folderPath = projectPath + "/SoapUIResults";

      // Create a File object for the specified path
      def resultFolder = new File(folderPath);

      // Check for existence of folder and create a folder
      if(!resultFolder.exists())
      {
        resultFolder.mkdirs();
      }

/* ------------------------------------------------------------------------------- */

// 2. Create a subfolder (with timestamp) to store the request-response local copy 
      // Retrieve the latest execution date-time
      Date d = new Date();
      def executionDate = d.format("dd-MMM-yyyy HH_mm");

      // Specify the subfolder path with name Request-Response_CurrentTimeStamp
      String subfolderPath1 = folderPath+ "/Request-Response_"+executionDate;

      // Create this sub-folder
      new File(subfolderPath1).mkdirs();

/* ------------------------------------------------------------------------------- */

// 3. Create another subfolder "CSV Reports" to store the reports file 
      // Specify the subfolder path with name CSV Reports
      String subfolderPath2 = folderPath+ "/CSV Reports";

      // Create this sub-folder
      new File(subfolderPath2).mkdirs();

/* ------------------------------------------------------------------------------- */

// 4. Create a Report.csv file inside the CSV Reports folder 
      // Create a File object for Report csv file (with timestamp)
      def reportFile = new File(subfolderPath2, "Report_"+executionDate+".csv");

      // Check for existence of report file and create a file
      if(!reportFile.exists())
      {
        reportFile.createNewFile();
        // Create required column names in the report file
        reportFile.write('"Test Suite","Test Case","Test Step","Step Type","Step Status",'
                        +'"Result message","Execution Date"');
      }
/* ------------------------------------------------------------------------------- */
// 5. Inserting data in the file
      // Iterate over all the test steps results
  for(stepResult in testRunner.getResults())
  {
    // Retrieve Test Suite name
   def testSuite = testRunner.testCase.testSuite.name;
   // Retrieve Test Case name
   def testCase = testRunner.testCase.name;
   // Retrieve Test Step
   def testStep = stepResult.getTestStep();
   // Retrieve Test Step name
   def testStepName = testStep.name
   // Retrieve Test Step type
   def type = testStep.config.type
   // Retrieve Test Step status
   def status = stepResult.getStatus()

   // Creating new line in report file
   reportFile.append('\n');

   // Write all the necessary information in the file
   reportFile.append('"' + testSuite + '",');
   reportFile.append('"' + testCase + '",');
   reportFile.append('"' + testStepName + '",');
   reportFile.append('"' + type + '",');
   reportFile.append('"' + status + '",');

   // Retrieve the test result messages
   reportFile.append('"');
   for(resMessage in stepResult.getMessages())
   {
     // Write messages and separate multiple messages by new line
     reportFile.append('Message:' + resMessage + '\n');
   }
   reportFile.append('",');

   //Write executionDate in the file
   reportFile.append('"' + executionDate + '",');
/* ------------------------------------------------------------------------------- */
// 6. Extract the request and response and save it to external file
      // Verify if the test step type is request: SOAP project or restrequest: REST project
        if((type=="request").or(type=="restrequest"))
        {
          // Extract the request from the test step
          def extRequest = testStep.properties["Request"].value;    

      // Create a file in the reports folder and write the request
      // Naming convention: request_TestSuiteName_TestCaseName_TestStepName.txt
      def requestFile=subfolderPath1+"/request_"+testSuite+"_"+testCase+"_"+testStepName+".txt";
      def rqfile = new File(requestFile);
      rqfile.write(extRequest, "UTF-8");

      // Extract the response from the test step
      def extResponse = stepResult.getResponseContent();    

      // Create a file in the reports folder and write the response
      // Naming convention: response_TestSuiteName_TestCaseName_TestStepName.txt
      def responseFile=subfolderPath1+"/response_"+testSuite+"_"+testCase+"_"+testStepName+".txt";
      def rsfile = new File(responseFile);
      rsfile.write(extResponse, "UTF-8");
     }
   }
 }
catch(exc)
{
   log.error("Exception happened: " + exc.toString());
}</script></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:mockService id="8838b8ae-2969-49ac-9639-c49b5cf0d495" port="8080" path="/" host="D2019Q3FFK" name="MockService 1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:properties/><con:mockOperation name="tsGetFirstMenu" id="6f38b546-6f88-4ba4-8c80-fb8b69fa4623" interface="tsUSSDGWBinding" operation="tsGetFirstMenu"><con:settings/><con:defaultResponse>Response 1</con:defaultResponse><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:response name="Response 1" id="90f44800-76e0-4a35-a38f-b6bcc94493f3" httpResponseStatus="200" encoding="UTF-8"><con:settings/><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:telmaServices">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:tsGetFirstMenuResponse>
         <statusCode>000</statusCode>
         <statusReason>Recuperation menu OK</statusReason>
         <!--Optional:-->
         <menu>?</menu>
         <!--Optional:-->
         <hostname>?</hostname>
      </urn:tsGetFirstMenuResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetFirstMenu"/></con:response><con:dispatchConfig/></con:mockOperation><con:mockOperation name="tsGetSubMenu" id="70415684-8d96-4777-b915-9459c709468b" interface="tsUSSDGWBinding" operation="tsGetSubMenu"><con:settings/><con:defaultResponse>Response 1</con:defaultResponse><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:response name="Response 1" id="920ccc7a-83b6-40de-97a1-523e86f82608" httpResponseStatus="200" encoding="UTF-8"><con:settings/><con:responseContent><![CDATA[<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <tns:tsGetSubMenuResponse xmlns:tns="urn:telmaServices">
         <statusCode>000</statusCode>
         <statusReason>Recuperation menu OK</statusReason>
         <menu>Votre solde MVola est insuffisant. Votre solde est de $Bal$Ar. Faites un depot MVola suffisant pour pouvoir effectuer cette transaction. Ref: $transid$</menu>
         <type>RESPONSE</type>
         <hostname>tapp478lv</hostname>
      </tns:tsGetSubMenuResponse>
   </soap:Body>
</soap:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:telmaServices/tsGetSubMenu"/></con:response><con:dispatchConfig/></con:mockOperation></con:mockService><con:properties><con:property><con:name>End point</con:name><con:value>http://tarur2q:8040/services/tsUSSDGW?wsdl</con:value></con:property><con:property><con:name>Langue</con:name><con:value>FR</con:value></con:property><con:property><con:name>MSISDN_1</con:name><con:value>261343500078</con:value></con:property><con:property><con:name>MSISDN_2</con:name><con:value>261343500003</con:value></con:property><con:property><con:name>MSISDN_have_not_MVola</con:name><con:value>261343500078</con:value></con:property><con:property><con:name>MSISDN_pass_expired</con:name><con:value>261343500078</con:value></con:property><con:property><con:name>MSISDN_access_denied</con:name><con:value>261343500078</con:value></con:property><con:property><con:name>MSISDN_inactive</con:name><con:value>261343500078</con:value></con:property><con:property><con:name>MSISDN_Suspended</con:name><con:value>261343500078</con:value></con:property><con:property><con:name>MSISDN_not_eligible</con:name><con:value>261343500078</con:value></con:property><con:property><con:name>MSISDN_postpaid</con:name><con:value>261343500078</con:value></con:property><con:property><con:name>PIN_MSISDN_1</con:name><con:value>0000</con:value></con:property><con:property><con:name>PIN_MSISDN_2</con:name><con:value>0000</con:value></con:property><con:property><con:name>PIN_MSISDN_not_MVola</con:name><con:value>0000</con:value></con:property><con:property><con:name>PIN_MSISDN_pass_expired</con:name><con:value>0000</con:value></con:property><con:property><con:name>PIN_MSISDN_access_denied</con:name><con:value>0000</con:value></con:property><con:property><con:name>Solde_MSISDN_insuffisant</con:name><con:value>500</con:value></con:property><con:property><con:name>ShortCode</con:name><con:value>*130*555%23</con:value></con:property><con:property><con:name>USSD_channel</con:name><con:value>USSD</con:value></con:property><con:property><con:name>Transac_ref</con:name><con:value>400400400</con:value></con:property><con:property><con:name>Ref_insuf_sold</con:name><con:value/></con:property><con:property><con:name>Ref_insuf_sold_code_recharge</con:name><con:value/></con:property><con:property><con:name>Ref_perf_recharge_ok</con:name><con:value/></con:property><con:property><con:name>Ref_buy_recharge_ok</con:name><con:value/></con:property><con:property><con:name>Ref_perf_code_recharge_ok</con:name><con:value/></con:property><con:property><con:name>Ref_code_recharge_pin_ko</con:name><con:value/></con:property><con:property><con:name>Ref_access_denied</con:name><con:value>007007007</con:value></con:property><con:property><con:name>Ref_code_recharge_access_denied</con:name><con:value> 009009009</con:value></con:property><con:property><con:name>Ref_wrong_pin_buy_recharge</con:name><con:value/></con:property><con:property><con:name>Ref_wrong_pin_code_recharge</con:name><con:value/></con:property><con:property><con:name>Ref_buy_recharge_other_ok</con:name><con:value>200000009</con:value></con:property><con:property><con:name>Ref_wrong_pin_buy_recharge_other</con:name><con:value/></con:property><con:property><con:name>Ref_insuf_sold_recharge_other</con:name><con:value/></con:property><con:property><con:name>Ref_access_denied_buy_other</con:name><con:value>150150150</con:value></con:property><con:property><con:name>Ref_creditor_have_no_account_buy_other</con:name><con:value/></con:property><con:property><con:name>Ref_suspended_buy_other</con:name><con:value/></con:property><con:property><con:name>Ref_wrong_pin_buy_offer</con:name><con:value/></con:property><con:property><con:name>Ref_insuf_sold_buy_offer</con:name><con:value>090909090</con:value></con:property><con:property><con:name>Ref_buy_offer_access_denied</con:name><con:value/></con:property><con:property><con:name>Ref_wrong_pin_buy_offer_other</con:name><con:value>002222334</con:value></con:property><con:property><con:name>Recharge_code_1000</con:name><con:value/></con:property><con:property><con:name>Ref_insuf_sold_buy_offer_other</con:name><con:value>123123123</con:value></con:property><con:property><con:name>Ref_buy_offer_other_access_denied</con:name><con:value>742742742</con:value></con:property><con:property><con:name>Ref_buy_offer_other_creditor_no_MVola</con:name><con:value>324324324</con:value></con:property><con:property><con:name>Ref_buy_offer_ok</con:name><con:value>575757577</con:value></con:property><con:property><con:name>Ref_buy_offer_other_ok</con:name><con:value>555555564</con:value></con:property><con:property><con:name>Ref_suspended_creditor_buy_offer</con:name><con:value>654654652</con:value></con:property><con:property><con:name>sold_MSISDN_exceeded</con:name><con:value>1000000</con:value></con:property><con:property><con:name>*111*1</con:name><con:value>*130*555</con:value></con:property><con:property><con:name>Diese</con:name><con:value>%23</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>